"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{1079:(e,t,a)=>{a.d(t,{A:()=>p});var n=a(7876),r=a(5259),o=a(1173);a(2069);var s=a(4232),i=a(8477),l=a(6059),d=a(2393),c=a(3014);function p(e){var t;let{accountData:a,supporter:p,eloData:x,session:g,isPublic:u=!1,username:f=null,viewingPublicProfile:m=!1}=e,{t:h}=(0,o.B)("common"),[b,y]=(0,s.useState)(!1),j=!u&&(null==g||null==(t=g.token)?void 0:t.pendingNameChange),w=async()=>{var e;if(j)return void y(!0);if(window.settingName)return;let t=null==g||null==(e=g.token)?void 0:e.secret;if(!t)return alert("An error occurred (log out and log back in)");try{let e=await fetch(window.cConfig.apiUrl+"/api/checkIfNameChangeProgress",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})}),a=await e.json();if(a.name)return alert(h("nameChangeInProgress",{name:a.name}))}catch(e){return alert("An error occurred")}let a=prompt(h("enterNewName"));window.settingName=!0;let n=await fetch(window.cConfig.apiUrl+"/api/setName",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,token:t})});if(n.ok)window.settingName=!1,alert(h("nameChanged")),setTimeout(()=>{window.location.reload()},1e3);else{window.settingName=!1;try{let e=await n.json();alert(e.message||"An error occurred")}catch(e){alert("An error occurred")}}},v={fontSize:"20px",letterSpacing:"0.5px",marginBottom:"15px",display:"flex",alignItems:"center"},k={marginRight:"12px",fontSize:"20px",width:"24px"},S={marginTop:"20px",padding:"12px 24px",border:"none",borderRadius:"25px",background:"linear-gradient(135deg, #28a745, #20c997)",color:"white",cursor:"pointer",fontSize:"16px",fontWeight:"600",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(40, 167, 69, 0.3)",textTransform:"uppercase",letterSpacing:"0.5px"},C={...v,color:"#ffc107",background:"rgba(255, 193, 7, 0.1)",padding:"10px 15px",borderRadius:"10px",border:"1px solid rgba(255, 193, 7, 0.3)"};return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flexStart",textAlign:"left",color:"#fff",fontFamily:'"Lexend", sans-serif',paddingBottom:"20px",boxSizing:"border-box",borderRadius:"10px",gap:"20px"},children:[(0,n.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",borderRadius:"20px",padding:"30px",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)(l.w_X,{style:k}),h("joined",{t:(0,r.A)(Date.now()-new Date(a.createdAt).getTime())})]}),a.lastLogin&&m&&(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)(l.Ny1,{style:k}),h("lastSeen"),": ",(0,r.A)(Date.now()-new Date(a.lastLogin).getTime())," ",h("ago")]}),(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)(l.gt3,{style:{...k}}),a.totalXp," XP"]}),(0,n.jsxs)("div",{style:v,children:[(0,n.jsx)(l.pBr,{style:k}),h("gamesPlayed",{games:a.gamesLen||a.gamesPlayed||0})]}),!u&&(0,n.jsxs)(n.Fragment,{children:[j?(0,n.jsxs)("button",{style:{...S,background:"linear-gradient(135deg, #f0883e, #d29922)",boxShadow:"0 4px 15px rgba(240, 136, 62, 0.3)"},onClick:w,onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 20px rgba(240, 136, 62, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 15px rgba(240, 136, 62, 0.3)"},children:["⚠️ ",h("changeName")," (",h("required")||"Required",")"]}):a.canChangeUsername?(0,n.jsx)("button",{style:S,onClick:w,onMouseEnter:e=>{e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="0 6px 20px rgba(40, 167, 69, 0.4)"},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="0 4px 15px rgba(40, 167, 69, 0.3)"},children:h("changeName")}):a.recentChange?(0,n.jsxs)("div",{style:C,children:[(0,n.jsx)("i",{className:"fas fa-exclamation-triangle",style:k}),h("recentChange")]}):null,!j&&a.daysUntilNameChange>0&&(0,n.jsxs)("div",{style:C,children:[(0,n.jsx)("i",{className:"fas fa-exclamation-triangle",style:k}),h("nameChangeCooldown",{days:a.daysUntilNameChange})]})]})]}),(0,n.jsx)(d.A,{session:g,isPublic:u,username:f}),b&&"undefined"!=typeof document&&(0,i.createPortal)((0,n.jsx)(c.A,{session:g,isOpen:b,onClose:()=>y(!1)}),document.body)]})}},2069:(e,t,a)=>{a.d(t,{WV:()=>r,t0:()=>n});let n={explorer:{min:0,max:1999,name:"Trekker",emoji:"\uD83E\uDD7E",color:"#808080",light:"#d3d3d3"},trekker:{min:2e3,max:4999,name:"Explorer",emoji:"\uD83E\uDDED",color:"#cd7f32"},voyager:{min:5e3,max:7999,name:"Voyager",emoji:"\uD83D\uDEA2",color:"#ffd700"},nomad:{min:8e3,max:2e4,name:"Nomad",emoji:"\uD83C\uDF0D",color:"#b9f2ff"}},r=e=>{for(let t in n)if(e>=n[t].min&&e<=n[t].max)return n[t]}},2393:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(7876),r=a(4250),o=a(4232),s=a(1173),i=a(3603),l=a(1047),d=a(1134);function c(e){var t,a,l,c,p;let{session:x,mode:g="xp",isPublic:u=!1,username:f=null}=e,{t:m}=(0,s.B)("common"),[h,b]=(0,o.useState)([]),[y,j]=(0,o.useState)(!0),[w,v]=(0,o.useState)("xp"===g?"xp":"elo"),[k,S]=(0,o.useState)("7days"),[C,T]=(0,o.useState)(""),[N,R]=(0,o.useState)(""),[M,A]=(0,o.useState)(null),z=async()=>{var e,t,a,n,r,o,s;if(u?f&&((null==(e=window.cConfig)?void 0:e.apiUrl)||(null==(t=(0,i.A)())?void 0:t.apiUrl)):(null==x||null==(a=x.token)?void 0:a.accountId)&&((null==(n=window.cConfig)?void 0:n.apiUrl)||(null==(r=(0,i.A)())?void 0:r.apiUrl))){j(!0);try{let e=u?{username:f}:{userId:x.token.accountId},t=(null==(o=window.cConfig)?void 0:o.apiUrl)||(null==(s=(0,i.A)())?void 0:s.apiUrl),a=await fetch(t+"/api/userProgression",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok){let e=await a.json();b(e.progression),B(e.progression)}else{console.error("Failed to fetch user progression",a.status);let e=await a.text();console.error("Error details:",e)}}catch(e){console.error("Error fetching user progression:",e)}finally{j(!1)}}},B=e=>{let t,a,n=[],r=new Date;if(e.filter(e=>{if("alltime"===k)return!0;let t=new Date(e.timestamp);if("custom"===k){if(!C&&!N)return!0;let e=new Date(C||0),a=N?new Date(N):r;return t>=e&&t<=a}let a=Math.floor((r-t)/864e5);return"7days"===k?a<=7:"30days"!==k||a<=30}).forEach((e,t)=>{let a=new Date(e.timestamp);"xp"===g?"xp"===w?n.push({x:a,y:e.totalXp,xpGain:e.xpGain||0,rank:e.xpRank,rankGain:e.rankImprovement||0}):n.push({x:a,y:e.xpRank,rankGain:e.rankImprovement||0}):"elo"===w?n.push({x:a,y:e.elo,eloGain:e.eloChange||0,rank:e.eloRank,rankGain:e.eloChange?e.eloChange>0?Math.abs(e.rankImprovement||0):-Math.abs(e.rankImprovement||0):0}):n.push({x:a,y:e.eloRank,rankGain:e.eloChange?e.eloChange>0?Math.abs(e.rankImprovement||0):-Math.abs(e.rankImprovement||0):0})}),1===n.length){let e=n[0],t=new Date;n.push({x:t,y:e.y,..."xp"===g?{xpGain:0,rank:e.rank,rankGain:0}:{eloGain:0,rank:e.rank,rankGain:0}})}else if(0===n.length){console.log("[XPGraph] No data points available"),A(null);return}else if(n.length>1){let e=n[n.length-1],t=new Date,a=new Date(e.x),r=!1;if("alltime"===k)r=!0;else if("custom"===k)if(C||N){let e=new Date(C||0),a=N?new Date(N):t;r=t>=e&&t<=a}else r=!0;else r=!0;let o=Math.abs(t.getTime()-a.getTime());r&&o>864e5&&n.push({x:t,y:e.y,..."xp"===g?{xpGain:0,rank:e.rank,rankGain:0}:{eloGain:0,rank:e.rank,rankGain:0}})}let o=n.map((e,t)=>{let a=!1;if(0===t||t===n.length-1)return 4;let r=n[t-1];return r&&e.y!==r.y&&(a=!0),a||(a="xp"===g?"xp"===w?0!==e.xpGain:0!==e.rankGain:"elo"===w?0!==e.eloGain:0!==e.rankGain),4*!!a}),s=n.map(e=>e.y),i=Math.min(...s),l=Math.max(...s),d=l-i;if(0===d){let e=Math.max(1,Math.abs(.1*i));t=i-e,a=i+e,console.log("[XPGraph] All values are the same, using artificial range:",{baseValue:i,artificialRange:e,suggestedMin:t,suggestedMax:a})}else{let e=.05*d;t=i-e,a=l+e}A({datasets:[{label:"xp"===g?"xp"===w?m("totalXP"):m("xpRank"):"elo"===w?m("elo"):m("eloRank"),data:n,borderColor:"xp"===g&&"xp"===w||"elo"===g&&"elo"===w?"#4CAF50":"#2196F3",backgroundColor:"xp"===g&&"xp"===w||"elo"===g&&"elo"===w?"rgba(76, 175, 80, 0.1)":"rgba(33, 150, 243, 0.1)",fill:!0,tension:0,pointRadius:o,pointHoverRadius:6,pointBackgroundColor:"xp"===g&&"xp"===w||"elo"===g&&"elo"===w?"#4CAF50":"#2196F3",pointBorderColor:"#ffffff",pointBorderWidth:2,suggestedMin:t,suggestedMax:a}]})};(0,o.useEffect)(()=>{h.length>0&&B(h)},[w,k,h,C,N]),(0,o.useEffect)(()=>{z()},[null==x||null==(t=x.token)?void 0:t.accountId,f,u]);let D={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:1,callbacks:{title:e=>new Date(e[0].parsed.x).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),label:e=>{if("xp"===g)if("xp"!==w)return e.raw.rankGain,["".concat(m("xpRank"),": #").concat(e.parsed.y)];else{let t=e.raw.xpGain||0,a=["".concat(m("totalXP"),": ").concat(e.parsed.y.toLocaleString())];return 0!==t&&a.push("".concat(m("xpGain"),": +").concat(t)),a}if("elo"!==w)return e.raw.rankGain,["".concat(m("eloRank"),": #").concat(e.parsed.y)];{let t=e.raw.eloGain||0,a=["".concat(m("elo"),": ").concat(e.parsed.y)];return 0!==t&&a.push("".concat(m("eloGain"),": ").concat(t>0?"+".concat(t):"".concat(t))),a}}}}},scales:{x:{type:"time",time:{unit:"day",displayFormats:{hour:"MMM dd",day:"MMM dd",week:"MMM dd",month:"MMM yyyy"},tooltipFormat:"MMM dd, yyyy HH:mm"},grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgba(255, 255, 255, 0.7)",maxTicksLimit:window.innerWidth<768?4:8,autoSkip:!0,maxRotation:45*(window.innerWidth<768),minRotation:45*(window.innerWidth<768)}},y:{min:null==M||null==(a=M.datasets[0])?void 0:a.suggestedMin,max:null==M||null==(l=M.datasets[0])?void 0:l.suggestedMax,reverse:"xp"===g&&"rank"===w||"elo"===g&&"eloRank"===w,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgba(255, 255, 255, 0.7)",callback:function(e){return"xp"===g&&"xp"===w||"elo"===g&&"elo"===w?Math.floor(e).toLocaleString():"#".concat(Math.floor(e))}}}}},G={background:"rgba(255, 255, 255, 0.05)",borderRadius:"20px",padding:"30px",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",marginTop:"20px"};if(y)return(0,n.jsx)("div",{style:G,children:(0,n.jsxs)("div",{style:{textAlign:"center",color:"#fff"},children:[(0,n.jsx)("div",{style:{width:"40px",height:"40px",border:"3px solid rgba(255,255,255,0.3)",borderTop:"3px solid #4CAF50",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),(0,n.jsx)("p",{children:m("loadingGameHistory")})]})});if(0===h.length)return(0,n.jsx)("div",{style:G,children:(0,n.jsxs)("div",{style:{textAlign:"center",color:"#fff"},children:[(0,n.jsx)("h3",{children:m("noStatsAvailable")}),(0,n.jsx)("p",{children:m("playGamesToSeeProgression")})]})});let L=()=>{if(0===h.length)return 0;let e=h[h.length-1];return"xp"===g?"xp"===w?e.totalXp:e.xpRank:"elo"===w?e.elo:e.eloRank};return(0,n.jsxs)("div",{style:G,className:"jsx-869b1a0f881f2744 xp-graph-container",children:[(0,n.jsxs)("div",{className:"jsx-869b1a0f881f2744 xp-graph-header",children:[(0,n.jsx)("h3",{className:"jsx-869b1a0f881f2744 xp-graph-title",children:(()=>{let e="xp"===g?"xp"===w?m("xpOverTime"):m("rankOverTime"):"elo"===w?m("eloOverTime"):m("eloRankOverTime");switch(k){case"7days":return"".concat(e," (7 Days)");case"30days":return"".concat(e," (30 Days)");case"custom":if(C&&N)return"".concat(e," (").concat(new Date(C).toLocaleDateString()," - ").concat(new Date(N).toLocaleDateString(),")");if(C)return"".concat(e," (From ").concat(new Date(C).toLocaleDateString(),")");if(N)return"".concat(e," (Until ").concat(new Date(N).toLocaleDateString(),")");else return"".concat(e," (Custom)");default:return"".concat(e," (All Time)")}})()}),(0,n.jsxs)("div",{className:"jsx-869b1a0f881f2744 xp-graph-controls",children:[(0,n.jsxs)("div",{className:"jsx-869b1a0f881f2744 date-filter-toggle",children:[(0,n.jsx)("button",{onClick:()=>S("7days"),className:"jsx-869b1a0f881f2744 "+"toggle-btn ".concat("7days"===k?"active":""),children:"7D"}),(0,n.jsx)("button",{onClick:()=>S("30days"),className:"jsx-869b1a0f881f2744 "+"toggle-btn ".concat("30days"===k?"active":""),children:"30D"}),(0,n.jsx)("button",{onClick:()=>S("alltime"),className:"jsx-869b1a0f881f2744 "+"toggle-btn ".concat("alltime"===k?"active":""),children:"All"}),(0,n.jsx)("button",{onClick:()=>S("custom"),className:"jsx-869b1a0f881f2744 "+"toggle-btn ".concat("custom"===k?"active":""),children:"Custom"})]}),"custom"===k&&(0,n.jsxs)("div",{className:"jsx-869b1a0f881f2744 custom-date-picker",children:[(0,n.jsx)("input",{type:"date",value:C,onChange:e=>T(e.target.value),placeholder:"Start Date",className:"jsx-869b1a0f881f2744 date-input"}),(0,n.jsx)("span",{className:"jsx-869b1a0f881f2744 date-separator",children:"to"}),(0,n.jsx)("input",{type:"date",value:N,onChange:e=>R(e.target.value),placeholder:"End Date",className:"jsx-869b1a0f881f2744 date-input"})]}),(0,n.jsxs)("div",{className:"jsx-869b1a0f881f2744 view-mode-toggle",children:[(0,n.jsx)("button",{onClick:()=>v("xp"===g?"xp":"elo"),className:"jsx-869b1a0f881f2744 "+"toggle-btn ".concat("xp"===g?"xp"===w?"active":"":"elo"===w?"active":""),children:"xp"===g?m("xp"):m("elo")}),(0,n.jsx)("button",{onClick:()=>v("xp"===g?"rank":"eloRank"),className:"jsx-869b1a0f881f2744 "+"toggle-btn ".concat("xp"===g?"rank"===w?"active":"":"eloRank"===w?"active":""),children:m("rank")})]})]})]}),(0,n.jsx)("div",{className:"jsx-869b1a0f881f2744 chart-container",children:M&&(0,n.jsx)(d.N1,{data:M,options:D})}),(0,n.jsxs)("div",{className:"jsx-869b1a0f881f2744 chart-stats",children:[(0,n.jsx)("span",{className:"jsx-869b1a0f881f2744 data-points",children:m("dataPoints",{count:(null==M||null==(p=M.datasets[0])||null==(c=p.data)?void 0:c.length)||0})}),(0,n.jsx)("span",{className:"jsx-869b1a0f881f2744 current-value",children:"xp"===g?"xp"===w?"".concat(m("currentXP"),": ").concat(L().toLocaleString()):"".concat(m("currentRank"),": #").concat(L()):"elo"===w?"".concat(m("currentElo"),": ").concat(L()):"".concat(m("currentRank"),": #").concat(L())})]}),(0,n.jsx)(r,{id:"869b1a0f881f2744",children:"@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.xp-graph-header.jsx-869b1a0f881f2744{display:flex;flex-direction:column;gap:20px;margin-bottom:20px}.xp-graph-title.jsx-869b1a0f881f2744{color:#fff;margin:0;font-size:20px;font-weight:bold;text-align:center;line-height:1.3}.xp-graph-controls.jsx-869b1a0f881f2744{display:flex;flex-direction:column;gap:15px;align-items:center;width:100%}.date-filter-toggle.jsx-869b1a0f881f2744,.view-mode-toggle.jsx-869b1a0f881f2744{display:flex;background:rgba(255,255,255,.1);border-radius:25px;padding:2px;gap:1px;width:100%;max-width:100%;justify-content:center}.toggle-btn.jsx-869b1a0f881f2744{padding:10px 8px;border-radius:20px;border:none;background:transparent;color:#fff;cursor:pointer;font-size:13px;font-weight:600;transition:all.3s ease;text-transform:uppercase;letter-spacing:.3px;white-space:nowrap;flex:1;min-width:0;text-align:center}.toggle-btn.active.jsx-869b1a0f881f2744{background:#4CAF50;transform:scale(1.05)}.toggle-btn.jsx-869b1a0f881f2744:hover:not(.active){background:rgba(255,255,255,.1);transform:scale(1.02)}.custom-date-picker.jsx-869b1a0f881f2744{display:flex;gap:12px;align-items:center;background:rgba(255,255,255,.1);border-radius:12px;padding:15px;width:100%;max-width:100%;flex-wrap:wrap;justify-content:center}.date-input.jsx-869b1a0f881f2744{background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.3);border-radius:8px;padding:12px;color:#fff;font-size:14px;min-width:140px;flex:1;max-width:200px}.date-input.jsx-869b1a0f881f2744:focus{outline:none;border-color:#4CAF50;box-shadow:0 0 0 2px rgba(76,175,80,.2)}.date-separator.jsx-869b1a0f881f2744{color:#fff;font-size:14px;font-weight:500;white-space:nowrap}.chart-container.jsx-869b1a0f881f2744{height:300px;position:relative;margin:20px 0}.chart-stats.jsx-869b1a0f881f2744{display:flex;flex-direction:column;gap:8px;margin-top:15px;color:rgba(255,255,255,.7);font-size:14px;text-align:center}.data-points.jsx-869b1a0f881f2744,.current-value.jsx-869b1a0f881f2744{display:block}@media(min-width:768px){.xp-graph-header.jsx-869b1a0f881f2744{flex-direction:row;justify-content:space-between;align-items:flex-start}.xp-graph-title.jsx-869b1a0f881f2744{font-size:24px;text-align:left;flex:1}.xp-graph-controls.jsx-869b1a0f881f2744{align-items:flex-end;flex-shrink:0;width:auto;max-width:400px}.date-filter-toggle.jsx-869b1a0f881f2744,.view-mode-toggle.jsx-869b1a0f881f2744{width:fit-content;justify-content:flex-end}.toggle-btn.jsx-869b1a0f881f2744{padding:10px 20px;flex:none;min-width:auto;max-width:none}.custom-date-picker.jsx-869b1a0f881f2744{flex-wrap:nowrap;width:fit-content;justify-content:flex-end}.date-input.jsx-869b1a0f881f2744{min-width:120px;flex:none}.chart-container.jsx-869b1a0f881f2744{height:400px}.chart-stats.jsx-869b1a0f881f2744{flex-direction:row;justify-content:space-between;text-align:left}}@media(min-width:1024px){.xp-graph-controls.jsx-869b1a0f881f2744{max-width:500px}}@media(max-width:480px){.xp-graph-title.jsx-869b1a0f881f2744{font-size:18px}.toggle-btn.jsx-869b1a0f881f2744{padding:8px 6px;font-size:11px}.custom-date-picker.jsx-869b1a0f881f2744{padding:12px;gap:8px}.date-input.jsx-869b1a0f881f2744{padding:10px;font-size:12px;min-width:120px}}"})]})}a(5961),l.t1.register(l.PP,l.kc,l.FN,l.No,l.hE,l.m_,l.s$,l.dN,l.UA)},3014:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(7876),r=a(4232),o=a(1173);function s(e){var t;let{session:a,onClose:s,isOpen:l=!0}=e,{t:d}=(0,o.B)("common"),[c,p]=(0,r.useState)(""),[x,g]=(0,r.useState)(!1),[u,f]=(0,r.useState)(null),[m,h]=(0,r.useState)(!1),[b,y]=(0,r.useState)(null),j=async()=>{try{var e;let t=await fetch(window.cConfig.apiUrl+"/api/checkNameChangeStatus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:null==a||null==(e=a.token)?void 0:e.secret})});if(t.ok){let e=await t.json();e.hasPendingRequest&&y(e.request)}}catch(e){console.error("Error checking name change status:",e)}};if((0,r.useEffect)(()=>{l&&j()},[l]),!l)return null;let w=async()=>{if(!c.trim())return void f("Please enter a new username");let e=c.trim();if(e.length<3||e.length>20)return void f("Username must be between 3 and 20 characters");if(!/^[a-zA-Z0-9_-]+$/.test(e))return void f("Username can only contain letters, numbers, underscores, and hyphens");g(!0),f(null);try{var t;let n=await fetch(window.cConfig.apiUrl+"/api/submitNameChange",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:null==a||null==(t=a.token)?void 0:t.secret,newUsername:e})}),r=await n.json();n.ok?(h(!0),y({requestedUsername:e,status:"pending"})):f(r.message||"Failed to submit name change")}catch(e){f("Network error occurred")}finally{g(!1)}};return(0,n.jsx)("div",{style:i.overlay,children:(0,n.jsxs)("div",{style:i.modal,children:[(0,n.jsxs)("div",{style:i.header,children:[(0,n.jsx)("h2",{style:i.title,children:"⚠️ Username Change Required"}),s&&(0,n.jsx)("button",{onClick:s,style:i.closeBtn,children:"\xd7"})]}),(0,n.jsxs)("div",{style:i.body,children:[(0,n.jsx)("p",{style:i.description,children:"Your username has been flagged as inappropriate. You can still play singleplayer, but multiplayer is disabled until your new name is approved."}),(null==a||null==(t=a.token)?void 0:t.pendingNameChangeReason)&&(0,n.jsxs)("p",{style:i.reason,children:[(0,n.jsx)("strong",{children:"Reason:"})," ",a.token.pendingNameChangeReason]}),(null==b?void 0:b.status)==="pending"?(0,n.jsxs)("div",{style:i.pendingBox,children:[(0,n.jsx)("h3",{style:i.pendingTitle,children:"⏳ Awaiting Approval"}),(0,n.jsxs)("p",{style:i.pendingText,children:["Your requested username ",(0,n.jsxs)("strong",{children:['"',b.requestedUsername,'"']})," is being reviewed by our moderation team."]}),(0,n.jsx)("p",{style:i.pendingNote,children:"You will be able to play multiplayer once your new username is approved. This usually takes less than 7 days."}),(0,n.jsx)("div",{style:i.divider,children:(0,n.jsx)("span",{children:"or submit a different name"})})]}):(null==b?void 0:b.status)==="rejected"?(0,n.jsxs)("div",{style:i.rejectedBox,children:[(0,n.jsx)("h3",{style:i.rejectedTitle,children:"❌ Name Rejected"}),(0,n.jsxs)("p",{style:i.rejectedText,children:["Your requested username ",(0,n.jsxs)("strong",{children:['"',b.requestedUsername,'"']})," was rejected."]}),b.rejectionReason&&(0,n.jsxs)("p",{style:i.rejectedReason,children:["Reason: ",b.rejectionReason]}),(0,n.jsx)("p",{style:i.pendingNote,children:"Please choose a different username below."})]}):null,m&&!b?(0,n.jsxs)("div",{style:i.successBox,children:[(0,n.jsx)("h3",{style:i.successTitle,children:"✅ Request Submitted"}),(0,n.jsx)("p",{style:i.successText,children:"Your name change request has been submitted for review."})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:i.inputGroup,children:[(0,n.jsx)("label",{style:i.label,children:"New Username:"}),(0,n.jsx)("input",{type:"text",value:c,onChange:e=>p(e.target.value),placeholder:"Enter new username...",style:i.input,maxLength:20,disabled:x}),(0,n.jsx)("span",{style:i.hint,children:"3-20 characters, letters, numbers, underscores, and hyphens only"})]}),u&&(0,n.jsxs)("div",{style:i.error,children:["❌ ",u]}),(0,n.jsx)("button",{onClick:w,disabled:x||!c.trim(),style:{...i.submitBtn,opacity:x||!c.trim()?.5:1},children:x?"Submitting...":"Submit New Username"})]}),(0,n.jsxs)("p",{style:i.contactInfo,children:["Need help? Contact ",(0,n.jsx)("a",{href:"mailto:support@worldguessr.com",style:i.link,children:"support@worldguessr.com"})]})]})]})})}let i={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,padding:"20px"},modal:{backgroundColor:"#161b22",borderRadius:"12px",border:"1px solid #30363d",maxWidth:"500px",width:"100%",maxHeight:"90vh",overflow:"auto"},header:{padding:"20px",borderBottom:"1px solid #30363d",backgroundColor:"#0d1117",borderRadius:"12px 12px 0 0",display:"flex",justifyContent:"space-between",alignItems:"center"},title:{margin:0,color:"#ffa657",fontSize:"1.5rem",fontFamily:"Lexend, sans-serif"},closeBtn:{background:"none",border:"none",color:"#6e7681",fontSize:"28px",cursor:"pointer",padding:"0",lineHeight:"1"},body:{padding:"20px"},description:{color:"#b1bac4",fontSize:"1rem",lineHeight:"1.6",marginBottom:"16px"},reason:{backgroundColor:"#21262d",padding:"12px",borderRadius:"6px",color:"#e6edf3",marginBottom:"20px",fontSize:"0.9rem"},pendingBox:{backgroundColor:"rgba(210, 153, 34, 0.1)",border:"1px solid #d29922",borderRadius:"8px",padding:"16px",marginBottom:"20px"},pendingTitle:{margin:"0 0 8px 0",color:"#d29922",fontSize:"1.1rem"},pendingText:{color:"#e6edf3",margin:"0 0 8px 0"},pendingNote:{color:"#b1bac4",fontSize:"0.9rem",margin:0},rejectedBox:{backgroundColor:"rgba(248, 81, 73, 0.1)",border:"1px solid #f85149",borderRadius:"8px",padding:"16px",marginBottom:"20px"},rejectedTitle:{margin:"0 0 8px 0",color:"#f85149",fontSize:"1.1rem"},rejectedText:{color:"#e6edf3",margin:"0 0 8px 0"},rejectedReason:{color:"#f85149",fontStyle:"italic",margin:"0 0 8px 0"},successBox:{backgroundColor:"rgba(63, 185, 80, 0.1)",border:"1px solid #3fb950",borderRadius:"8px",padding:"16px",marginBottom:"20px"},successTitle:{margin:"0 0 8px 0",color:"#3fb950",fontSize:"1.1rem"},successText:{color:"#e6edf3",margin:0},divider:{textAlign:"center",color:"#6e7681",margin:"20px 0",fontSize:"0.85rem"},inputGroup:{marginBottom:"16px"},label:{display:"block",color:"#e6edf3",marginBottom:"8px",fontWeight:500},input:{width:"100%",padding:"12px",fontSize:"1rem",border:"1px solid #30363d",borderRadius:"6px",backgroundColor:"#0d1117",color:"#e6edf3",fontFamily:"Lexend, sans-serif",outline:"none",boxSizing:"border-box"},hint:{display:"block",color:"#6e7681",fontSize:"0.8rem",marginTop:"4px"},error:{backgroundColor:"rgba(248, 81, 73, 0.1)",border:"1px solid #f85149",borderRadius:"6px",padding:"12px",color:"#f85149",marginBottom:"16px"},submitBtn:{width:"100%",padding:"14px",fontSize:"1rem",fontWeight:600,border:"none",borderRadius:"6px",backgroundColor:"#3fb950",color:"#0d1117",cursor:"pointer",fontFamily:"Lexend, sans-serif",marginBottom:"20px"},contactInfo:{textAlign:"center",color:"#6e7681",fontSize:"0.85rem",margin:0},link:{color:"#58a6ff"}}},5259:(e,t,a)=>{a.d(t,{A:()=>n});function n(e){let t=[],a=Math.trunc(e/864e5);a>0&&(t.push(a+"d"),e-=864e5*a);let n=Math.trunc(e/36e5);n>0&&(t.push(n+"h"),e-=36e5*n);let r=Math.trunc(e/6e4);r>0&&(t.push(r+"m"),e-=6e4*r);let o=Math.trunc(e/1e3);return o>0&&t.push(o+"s"),t[0]}},9262:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(7876),r=a(1173),o=a(2069),s=a(4232),i=a(2393);function l(e){let{eloData:t,session:a,isPublic:l=!1,username:d=null,viewingPublicProfile:c=!1}=e,{t:p}=(0,r.B)("common"),x=(0,o.WV)(t.elo),[g,u]=(0,s.useState)(null),f={background:"rgba(255, 255, 255, 0.1)",borderRadius:"clamp(10px, 3vw, 20px)",padding:"clamp(15px, 4vw, 30px)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},m={background:"rgba(255, 255, 255, 0.05)",borderRadius:"clamp(8px, 2vw, 15px)",padding:"clamp(12px, 3vw, 20px)",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.3s ease"},h={fontSize:"clamp(12px, 2.5vw, 16px)",color:"#b0b0b0",marginBottom:"clamp(4px, 1.5vw, 8px)",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:"500"},b={fontSize:"clamp(18px, 4vw, 28px)",color:"#ffd700",fontWeight:"bold",textShadow:"0 0 10px rgba(255, 215, 0, 0.3)"};return(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"clamp(15px, 4vw, 30px)",color:"#fff",fontFamily:"Arial, sans-serif"},children:[(0,n.jsxs)("div",{style:f,children:[(0,n.jsx)("h2",{style:{fontSize:"clamp(20px, 4vw, 32px)",fontWeight:600,marginBottom:"clamp(10px, 3vw, 20px)",color:"white",textAlign:"center"},children:p("leagues")}),(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"clamp(8px, 2vw, 15px)",flexWrap:"wrap",marginTop:"clamp(15px, 4vw, 30px)",padding:"clamp(10px, 3vw, 20px)",background:"rgba(0, 0, 0, 0.2)",borderRadius:"clamp(10px, 3vw, 20px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:Object.values(o.t0).map(e=>{let t=x.name===e.name,a=e.min;return(0,n.jsxs)("div",{style:{position:"relative",textAlign:"center",cursor:"pointer",transition:"transform 0.3s ease",transform:t?"scale(1.15)":"scale(1)"},onMouseEnter:t=>{t.currentTarget.style.transform="scale(1.2)",u(e.name)},onMouseLeave:e=>{e.currentTarget.style.transform=t?"scale(1.15)":"scale(1)",u(null)},children:[(0,n.jsxs)("div",{style:{width:"clamp(50px, 10vw, 80px)",height:"clamp(45px, 9vw, 70px)",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.color,color:"black",borderRadius:"clamp(8px, 2vw, 15px)",fontSize:"clamp(25px, 6vw, 50px)",fontWeight:"bold",position:"relative",overflow:"hidden",boxShadow:t?"0 0 20px rgba(255, 215, 0, 0.5)":"0 4px 15px rgba(0, 0, 0, 0.3)",border:t?"3px solid #ffd700":"2px solid rgba(255, 255, 255, 0.2)"},children:[e.emoji,t&&(0,n.jsx)("div",{style:{position:"absolute",top:"-100%",left:"-100%",width:"200%",height:"200%",background:"linear-gradient(45deg, rgba(255,255,255,0.6), rgba(255,255,255,0))",transform:"rotate(30deg)",animation:"shine 2s infinite linear"}})]}),(0,n.jsx)("p",{style:{fontSize:"clamp(12px, 3vw, 16px)",marginTop:"clamp(6px, 1.5vw, 8px)",color:t?"#ffd700":"#e0e0e0",fontWeight:t?"bold":"600",textShadow:t?"0px 0px 8px #ffd700":"none"},children:e.name}),a>0&&(0,n.jsxs)("div",{style:{position:"absolute",top:"clamp(-20px, -4vw, -16px)",left:"50%",transform:"translateX(-50%)",backgroundColor:e.color,color:"black",border:"2px solid black",padding:"clamp(3px, 1vw, 4px) clamp(6px, 2vw, 8px)",borderRadius:"clamp(8px, 2vw, 10px)",fontSize:"clamp(10px, 2.5vw, 12px)",fontWeight:"bold",opacity:+(g===e.name),transition:"opacity 0.3s",whiteSpace:"nowrap",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)"},className:"elo-badge",children:[a," ELO"]})]},e.name)})})]}),(0,n.jsxs)("div",{style:f,children:[(0,n.jsx)("h2",{style:{fontSize:"clamp(20px, 4vw, 32px)",fontWeight:600,marginBottom:"clamp(10px, 3vw, 20px)",color:"white",textAlign:"center"},children:p("statistics")}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"clamp(10px, 3vw, 20px)",marginTop:"clamp(10px, 3vw, 20px)"},children:[(0,n.jsxs)("div",{style:m,onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.transform="translateY(-5px)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.transform="translateY(0)"},children:[(0,n.jsx)("div",{style:h,children:p(c?"elo":"yourElo")}),(0,n.jsx)("div",{style:b,children:t.elo})]}),(0,n.jsxs)("div",{style:m,onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.transform="translateY(-5px)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.transform="translateY(0)"},children:[(0,n.jsx)("div",{style:h,children:p(c?"globalRank":"yourGlobalRank")}),(0,n.jsxs)("div",{style:b,children:["#",t.rank]})]}),(0,n.jsxs)("div",{style:m,onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.transform="translateY(-5px)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.transform="translateY(0)"},children:[(0,n.jsx)("div",{style:h,children:p("duels_won")}),(0,n.jsx)("div",{style:b,children:t.duels_wins})]}),(0,n.jsxs)("div",{style:m,onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.transform="translateY(-5px)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.transform="translateY(0)"},children:[(0,n.jsx)("div",{style:h,children:p("duels_lost")}),(0,n.jsx)("div",{style:b,children:t.duels_losses})]}),t.duels_tied>0&&(0,n.jsxs)("div",{style:m,onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.transform="translateY(-5px)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.transform="translateY(0)"},children:[(0,n.jsx)("div",{style:h,children:p("duels_tied")}),(0,n.jsx)("div",{style:b,children:t.duels_tied})]}),t.win_rate?(0,n.jsxs)("div",{style:m,onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.1)",e.currentTarget.style.transform="translateY(-5px)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.05)",e.currentTarget.style.transform="translateY(0)"},children:[(0,n.jsx)("div",{style:h,children:p("win_rate")}),(0,n.jsxs)("div",{style:b,children:[(100*t.win_rate).toFixed(2),"%"]})]}):null]})]}),(0,n.jsx)(i.A,{session:a,mode:"elo",isPublic:l,username:d})]})}}}]);