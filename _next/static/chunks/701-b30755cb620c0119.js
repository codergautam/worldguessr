"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{9701:(e,t,r)=>{r.d(t,{A:()=>x});var n=r(7876),o=r(4232),s=r(2446),a=r(3679);let i={MIN_LOCATIONS:5,MAX_LOCATIONS:1e5,MAX_NAME_LENGTH:30,MIN_NAME_LENGTH:3,MAX_SHORT_DESCRIPTION_LENGTH:100,MIN_SHORT_DESCRIPTION_LENGTH:20,MAX_LONG_DESCRIPTION_LENGTH:1e3};var l=r(6059);function c(e){let{map:t,setMap:r,createMap:a}=e,[c,d]=(0,o.useState)({name:t.name,description_short:t.description_short,description_long:t.description_long,data:t.data||[]}),[u,h]=(0,o.useState)(!1),p=e=>{d({...c,[e.target.name]:e.target.value})},m=e=>(e.preventDefault(),c.data.length<i.MIN_LOCATIONS)?void s.oR.error("Need at least ".concat(i.MIN_LOCATIONS," locations")):c.data.length>i.MAX_LOCATIONS?void s.oR.error("Too many locations"):c.name&&c.description_short?void(r({...t,...c,progress:!0}),a(c)):void s.oR.error("Missing required fields");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"make-map-form",style:{gap:0},children:[(0,n.jsx)("h2",{children:"Rules"}),(0,n.jsx)("li",{children:"Use a descriptive name"}),(0,n.jsx)("li",{children:"Have helpful and informative descriptions"}),(0,n.jsxs)("li",{children:["Add at least ",i.MIN_LOCATIONS," locations"]}),(0,n.jsx)("li",{children:"You can make 1 map an hour"}),(0,n.jsx)("li",{children:"Keep all details in English (no NSFW)"}),(0,n.jsxs)("li",{style:{marginTop:"10px",fontSize:"1.4em",listStyleType:"none"},children:["Need help? ",(0,n.jsx)("a",{style:{color:"cyan"},href:"https://discord.gg/ADw47GAyS5",target:"_blank",rel:"noreferrer",children:"Join our Discord"})]})]}),(0,n.jsxs)("form",{className:"make-map-form",onSubmit:m,children:[(0,n.jsx)("h2",{children:"Basic Info"}),(0,n.jsxs)("label",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["Name ",(0,n.jsxs)("span",{style:{color:c.name.length<i.MIN_NAME_LENGTH?"red":"green",marginLeft:"8px"},children:["(",c.name.length," / ",i.MAX_NAME_LENGTH,")"]})]}),(0,n.jsx)("input",{type:"text",name:"name",value:c.name,onChange:p,maxLength:i.MAX_NAME_LENGTH,minLength:i.MIN_NAME_LENGTH,style:{display:"block",marginTop:"8px"}})]}),(0,n.jsxs)("label",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["Short Description ",(0,n.jsxs)("span",{style:{color:c.description_short.length<i.MIN_SHORT_DESCRIPTION_LENGTH?"red":"green",marginLeft:"8px"},children:["(",c.description_short.length," / ",i.MAX_SHORT_DESCRIPTION_LENGTH,")"]})]}),(0,n.jsx)("input",{type:"text",name:"description_short",value:c.description_short,onChange:p,maxLength:i.MAX_SHORT_DESCRIPTION_LENGTH,minLength:i.MIN_SHORT_DESCRIPTION_LENGTH})]}),(0,n.jsxs)("label",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:["Long Description (Optional) ",(0,n.jsxs)("span",{style:{color:c.description_long.length>i.MAX_LONG_DESCRIPTION_LENGTH?"red":"gray",marginLeft:"8px"},children:["(",c.description_long.length," / ",i.MAX_LONG_DESCRIPTION_LENGTH,")"]})]}),(0,n.jsx)("textarea",{name:"description_long",value:c.description_long,onChange:p})]})]}),(0,n.jsxs)("div",{className:"make-map-form",style:{gap:0},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)("h2",{style:{marginBottom:"10px"},children:"Locations"}),(0,n.jsx)("button",{type:"button",style:{padding:"3px",marginLeft:"10px"},onClick:()=>{if(0===c.data.length)return void s.oR.error("No locations to copy");navigator.clipboard.writeText(JSON.stringify(c.data)),s.oR.success("Copied entered locations to clipboard")},children:(0,n.jsx)(l.paH,{})}),c.data.length<i.MIN_LOCATIONS&&(0,n.jsxs)("span",{style:{color:"red",marginLeft:"8px"},children:["(",i.MIN_LOCATIONS-c.data.length," more needed)"]}),c.data.length>=i.MIN_LOCATIONS&&(0,n.jsxs)("span",{style:{color:"green",marginLeft:"8px"},children:["(",c.data.length," / ",i.MAX_LOCATIONS,")"]})]}),!u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h3",{children:"Either enter them Manually..."}),(0,n.jsxs)("span",{style:{marginBottom:"5px"},children:[(0,n.jsx)("li",{children:"Visit Google Maps on a desktop computer"}),(0,n.jsx)("li",{children:"Drag the orange figure onto the map to open a streetview"}),(0,n.jsx)("li",{children:"Copy the URL from the address bar of your browser into the textbox"}),(0,n.jsxs)("li",{children:["You can add also add JSON strings with ","{lat, lng, heading, pitch, zoom, panoId}"]})]}),c.data.map((e,t)=>(0,n.jsxs)("div",{className:"url-input-container",children:[(0,n.jsx)("input",{type:"text",name:"url-".concat(t),value:e,onChange:e=>((e,t)=>{let r=[...c.data];r[e]=t,d({...c,data:r})})(t,e.target.value),className:"url-input"}),(0,n.jsx)("button",{type:"button",className:"delete-button",onClick:()=>(e=>{let t=c.data.filter((t,r)=>r!==e);d({...c,data:t})})(t),children:"✖ "}),(0,n.jsx)("span",{className:"validation-icon"})]},t)),(0,n.jsx)("button",{type:"button",className:"add-button",onClick:()=>{d({...c,data:[...c.data,""]})},children:"+ Add URL"}),(0,n.jsx)("br",{})]}),(0,n.jsx)("h3",{children:u?"Bulk Uploaded":"...or Bulk Upload a file"}),!u&&(0,n.jsxs)("span",{children:["Supports JSON format from ",(0,n.jsx)("a",{style:{color:"cyan"},href:"https://map-degen.vercel.app/",target:"_blank",rel:"noreferrer",children:"map-degen.vercel.app"})]}),!u&&(0,n.jsx)("div",{children:(0,n.jsxs)("label",{htmlFor:"file-upload",className:"add-button button",style:{width:"fit-content",display:"inline-block"},children:[(0,n.jsx)("input",{type:"file",accept:".json",onChange:function(e){let t=e.target.files[0],r=new FileReader;r.onload=e=>{let t=e.target.result;try{let e=function(e){if(console.log("parse map data"),"string"==typeof e)try{e=JSON.parse(e),console.log("converted to json")}catch(e){return}let t=[];if(Array.isArray(e)&&(t=e,console.log("already is array")),0===t.length){for(let r in console.log("looking for array"),e)if(Array.isArray(e[r])){console.log("found array",e[r]),t=e[r];break}}if(0===t.length)return void console.log("no array found");let r=[];return 0===(r=(r=t.map(e=>{if(!e)return;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e=function(e){let t=e.match(/@(-?\d+\.?\d*),(-?\d+\.?\d*)(?:,3a,(\d+\.?\d*)y,(-?\d+\.?\d*)h,(\d+\.?\d*)t)?/);if(!t)return null;{let r=parseFloat(t[1]),n=parseFloat(t[2]),o=t[3]?parseFloat(t[3]):null,s=t[4]?parseFloat(t[4]):null,a=t[5]?parseFloat(t[5])-90:null,i=null!==o?Math.log2(180/o):null,l=null,c=e.match(/!1s([A-Za-z0-9_-]+)/);return c&&(l=c[1]),{lat:r,lng:n,heading:s,pitch:a,zoom:i,panoId:l}}}(e)}let t={};try{for(let t of[["latitude"],["longitude","long","lon"]])for(let r of t)void 0!==e[r]&&(e[t[0]]=e[r],delete e[r])}catch(e){return}for(let r of["lat","lng","heading","pitch","zoom","panoId"])void 0!==e[r]&&(t[r]=e[r]);if(void 0!==t.lat&&void 0!==t.lng)return t})).filter(e=>e)).length?null:r}(t);if(!e)return void s.oR.error("Failed to parse file");if((e=e.map(e=>JSON.stringify(e))).length>i.MAX_LOCATIONS)return void s.oR.error("More than ".concat(i.MAX_LOCATIONS," locations in file"));s.oR.success("Parsed "+e.length+" locations"),h(!0),d({...c,data:e})}catch(e){s.oR.error("Invalid file format")}},r.readAsText(t)},style:{overflow:"hidden",width:0,height:0,opacity:0},id:"file-upload"}),"Upload File"]})}),u&&(0,n.jsx)("button",{type:"button",className:"add-button",onClick:()=>{d({...c,data:[]}),h(!1)},children:"Clear Upload"})]}),(0,n.jsx)("div",{className:"make-map-form",style:{gap:0},children:(0,n.jsx)("button",{type:"submit",onClick:m,disabled:t.progress,children:t.progress?"Loading...":"Publish"})})]})}var d=r(5364);function u(e){let{onPencilClick:t,showEditControls:r,map:i,onHeart:c,onClick:u,country:h,searchTerm:p,canHeart:m,showReviewOptions:g,secret:x,refreshHome:y,bgImage:f,forcedWidth:v}=e,_=f||(h?'url("https://flagcdn.com/h240/'.concat(null==h?void 0:h.toLowerCase(),'.png")'):""),[b,D]=(0,o.useState)(i.resubmittable),E=(e,t)=>{if(!t||!e||"string"!=typeof t||t.length<3)return e;let r=RegExp("(".concat(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"gi");return e.split(r).map((e,r)=>(null==e?void 0:e.toLowerCase())===(null==t?void 0:t.toLowerCase())?(0,n.jsx)("span",{className:"highlight-match",children:e},r):e)},C=(e,t,r)=>{e.stopPropagation();let n=null;(r||null!==(n=prompt("Please enter a reason for rejecting this map:")))&&fetch(window.cConfig.apiUrl+"/api/map/approveRejectMap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:x,mapId:t,action:r?"approve":"reject",rejectReason:n,resubmittable:b})}).then(e=>{e.json().then(r=>{e.ok?(s.oR.success(r.message),y({removeMap:t})):(s.oR.error(r.message),y())}).catch(e=>{console.error(e),s.oR.error("An error occurred while trying to review the map. Please try again later.")})}).catch(e=>{console.error(e),s.oR.error("An error occurred while trying to review the map. Please try again later.")})};return(0,n.jsxs)("div",{className:"map-tile ".concat(h?"country":""),onClick:u,style:_?{backgroundImage:_,backgroundSize:"cover",backgroundRepeat:"no-repeat",width:v||void 0}:{},children:[(0,n.jsx)("div",{className:"map-tile__header ".concat(h?"country":""),children:(0,n.jsxs)("div",{className:"map-tile__mapdetails",children:[(0,n.jsxs)("div",{className:"map-tile__content",children:[(0,n.jsxs)("div",{className:"map-tile__top-section",children:[(0,n.jsxs)("div",{className:"map-tile__name",children:[(0,n.jsx)("h3",{children:E(i.name,p)}),!h&&(i.in_review||i.reject_reason)&&i.yours&&!i.accepted&&(0,n.jsxs)("div",{className:"map-tile__status ".concat(i.reject_reason?"rejected":"in-review"),children:[!i.accepted&&i.resubmittable&&i.reject_reason&&(0,n.jsx)("span",{children:"Rejected"}),!i.accepted&&!i.reject_reason&&(0,n.jsx)("span",{children:"In Review"})]})]}),!h&&i.created_by_name&&!i.in_review&&!i.reject_reason&&(0,n.jsxs)("div",{className:"map-tile__actions",children:[(0,n.jsxs)("button",{className:"map-tile__heart ".concat(!m?"disabled":""," ").concat(i.hearted?"hearted":""),onClick:e=>{e.stopPropagation(),m&&c()},disabled:!m,children:[i.hearts,"\xa0",(0,n.jsx)(a.Mbv,{})]}),r&&i.yours&&(0,n.jsxs)("div",{className:"map-tile__controls",children:[(0,n.jsx)("button",{className:"map-tile__edit",onClick:e=>{e.stopPropagation(),fetch(window.cConfig.apiUrl+"/api/map/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:x,action:"get",mapId:i.id})}).then(e=>{e.json().then(r=>{if(e.ok){let e=r.map;t({...i,data:e.data,description_long:e.description_long})}else s.oR.error(r.message)}).catch(e=>{console.error(e),s.oR.error("An error occurred while trying to retrieve the map data. Please try again later.")})}).catch(e=>{console.error(e),s.oR.error("An error occurred while trying to retrieve the map data. Please try again later.")})},children:(0,n.jsx)(l.dgZ,{})}),(0,n.jsx)("button",{className:"map-tile__delete",onClick:e=>{var t;return t=i.id,void(e.stopPropagation(),confirm("Are you sure you want to delete this map?")&&fetch(window.cConfig.apiUrl+"/api/map/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:x,mapId:t})}).then(e=>{e.json().then(t=>{e.ok?(s.oR.success(t.message),y()):s.oR.error(t.message)}).catch(e=>{console.error(e),s.oR.error("An error occurred while trying to delete the map. Please try again later.")})}).catch(e=>{console.error(e),s.oR.error("An error occurred while trying to delete the map. Please try again later.")}))},children:(0,n.jsx)(a.qbC,{})})]})]})]}),(0,n.jsx)("div",{className:"map-tile__bottom-section",children:!h&&i.created_by_name&&(0,n.jsxs)("div",{className:"map-tile__author",children:[(0,n.jsx)(a.x$1,{size:12}),!d.env.NEXT_PUBLIC_COOLMATH&&(0,n.jsxs)(n.Fragment,{children:[E(i.created_by_name,p),"\xa0•\xa0"]}),i.accepted&&(0,n.jsxs)("span",{children:[(0,n.jsx)(a.vq8,{size:12}),"\xa0",function(e,t){if(!e||isNaN(e))return"0";if(t||(t=2),e<1e3)return e.toString();let r=Math.log10(e)/3|0,n=["K","M","B","T"][r-1],o=e/Math.pow(10,3*r),s=Math.max(0,Math.min(100,t-Math.floor(Math.log10(o))-1)),a=o.toFixed(s);return a=a.replace(/\.?0+$/,""),"".concat(a).concat(n)}(i.locations,2)]})]})})]}),g&&(0,n.jsxs)("div",{className:"map-tile__review-options",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("button",{className:"accept",onClick:e=>C(e,i.id,!0),children:"Accept"}),(0,n.jsx)("button",{className:"reject",onClick:e=>C(e,i.id,!1),children:"Reject"}),(0,n.jsxs)("label",{children:["Resubmittable?",(0,n.jsx)("input",{type:"checkbox",checked:b,onChange:e=>{e.stopPropagation(),D(!b)}})]})]})]})}),i.yours&&i.reject_reason&&(0,n.jsxs)("div",{className:"map-tile__reject-reason",children:[(0,n.jsx)("strong",{children:"Reject Reason:"})," ",i.reject_reason]})]})}let h={countryMaps:[{name:"Russia",slug:"russia",longDescription:"Explore Russia in WorldGuessr! From the historic cities of Moscow and St. Petersburg to the vast wilderness of Siberia, discover the diverse landscapes and culture of Russia.",shortDescription:"Explore Russia's 85 federal subjects and the largest country in the world!",maxDist:8224.333,countryCode:"RU",extent:[19.638306,41.185219,169.05,81.8575],created_by_name:"WorldGuessr",official:!0,countryMap:"RU",description_short:"Explore Russia's 85 federal subjects and the largest country in the world!"},{name:"United States",slug:"united-states",longDescription:"Explore the United States in WorldGuessr! From the bustling cities to the stunning national parks, discover the diverse landscapes and cultures of this vast country.",shortDescription:"Explore the USA's 50 states and over 400 national parks!",maxDist:6e3,countryCode:"US",extent:[-124.848974,24.396308,-66.885444,49.384358],created_by_name:"WorldGuessr",official:!0,countryMap:"US",description_short:"Explore the USA's 50 states and over 400 national parks!"},{name:"Canada",slug:"canada",longDescription:"Explore Canada in WorldGuessr! From the Rocky Mountains to the French-speaking province of Quebec, explore the vast and diverse landscapes of Canada.",shortDescription:"Explore Canada's 10 provinces and 3 territories!",maxDist:5656.416,countryCode:"CA",extent:[-141,41.676555,-52.619408,83.113881],created_by_name:"WorldGuessr",official:!0,countryMap:"CA",description_short:"Explore Canada's 10 provinces and 3 territories!"},{name:"Indonesia",slug:"indonesia",longDescription:"Explore Indonesia in WorldGuessr! Discover the stunning islands, active volcanoes, and rich culture of this Southeast Asian archipelago.",shortDescription:"Explore Indonesia's 17,000+ islands and 300+ ethnic groups!",maxDist:5642.759,countryCode:"ID",extent:[95.008,-11.005,141.007,6],created_by_name:"WorldGuessr",official:!0,countryMap:"ID",description_short:"Explore Indonesia's 17,000+ islands and 300+ ethnic groups!"},{name:"Chile",slug:"chile",longDescription:"Explore Chile in WorldGuessr! From the Atacama Desert to the fjords of Patagonia, discover the diverse and stunning landscapes of Chile.",shortDescription:"Explore Chile's 16 regions and the world's driest desert!",maxDist:4815.36,countryCode:"CL",extent:[-75.644711,-55.61183,-66.95992,-17.507144],created_by_name:"WorldGuessr",official:!0,countryMap:"CL",description_short:"Explore Chile's 16 regions and the world's driest desert!"},{name:"Brazil",slug:"brazil",longDescription:"Explore Brazil in WorldGuessr! From the Amazon rainforest to the vibrant city of Rio de Janeiro, immerse yourself in the diverse culture and natural beauty of Brazil.",shortDescription:"Explore Brazil's 26 states and the world's largest rainforest!",maxDist:4670.419,countryCode:"BR",extent:[-73.987235,-33.768378,-34.729993,5.244486],created_by_name:"WorldGuessr",official:!0,countryMap:"BR",description_short:"Explore Brazil's 26 states and the world's largest rainforest!"},{name:"Australia",slug:"australia",longDescription:"Explore Australia in WorldGuessr! Travel through the Outback, visit the iconic Sydney Opera House, and experience the unique wildlife of this vast island continent.",shortDescription:"Explore Australia's 8 states and territories!",maxDist:4600.556,countryCode:"AU",extent:[113.338953,-43.634597,153.569469,-10.668185],created_by_name:"WorldGuessr",official:!0,countryMap:"AU",description_short:"Explore Australia's 8 states and territories!"},{name:"India",slug:"india",longDescription:"Explore India in WorldGuessr! From the Himalayas to the bustling streets of Delhi, experience the diverse culture, languages, and landscapes of India.",shortDescription:"Explore India's 28 states and over 1,600 languages spoken!",maxDist:3828.242,countryCode:"IN",extent:[68.111378,6.754892,97.395358,35.504475],created_by_name:"WorldGuessr",official:!0,countryMap:"IN",description_short:"Explore India's 28 states and over 1,600 languages spoken!"},{name:"Argentina",slug:"argentina",longDescription:"Explore Argentina in WorldGuessr! From the bustling streets of Buenos Aires to the breathtaking landscapes of Patagonia, discover the vast beauty and culture of this South American gem.",shortDescription:"Explore Argentina's 23 provinces and diverse landscapes!",maxDist:3720.101,countryCode:"AR",extent:[-73.415436,-55.25,-53.65054,-21.83231],created_by_name:"WorldGuessr",official:!0,countryMap:"AR",description_short:"Explore Argentina's 23 provinces and diverse landscapes!"},{name:"Mexico",slug:"mexico",longDescription:"Explore Mexico in WorldGuessr! Discover the rich history, vibrant culture, and diverse landscapes of this North American country.",shortDescription:"Explore Mexico's 32 states and over 60 indigenous languages!",maxDist:3493.148,countryCode:"MX",extent:[-118.404,14.538,-86.703,32.718],created_by_name:"WorldGuessr",official:!0,countryMap:"MX",description_short:"Explore Mexico's 32 states and over 60 indigenous languages!"},{name:"Japan",slug:"japan",longDescription:"Explore Japan in WorldGuessr! Discover the blend of ancient traditions and modern technology in the Land of the Rising Sun.",shortDescription:"Explore Japan's 47 prefectures and over 6,800 islands!",maxDist:3020.565,countryCode:"JP",extent:[122.93457,24.396308,153.986672,45.551483],created_by_name:"WorldGuessr",official:!0,countryMap:"JP",description_short:"Explore Japan's 47 prefectures and over 6,800 islands!"},{name:"Spain",slug:"spain",longDescription:"Explore Spain in WorldGuessr! Discover the historic cities, beautiful beaches, and rich cultural heritage of this Southern European country.",shortDescription:"Explore Spain's 17 autonomous communities and over 47 UNESCO World Heritage sites!",maxDist:2607.001,countryCode:"ES",extent:[-18.1675,27.6375,4.3275,43.791667],created_by_name:"WorldGuessr",official:!0,countryMap:"ES",description_short:"Explore Spain's 17 autonomous communities and over 47 UNESCO World Heritage sites!"},{name:"New Zealand",slug:"new-zealand",longDescription:"Explore New Zealand in WorldGuessr! Discover the stunning landscapes, from mountains to beaches, in this beautiful island nation.",shortDescription:"Explore New Zealand's 2 main islands and over 600 smaller islands!",maxDist:2473.615,countryCode:"NZ",extent:[166.509144,-47.271812,178.517094,-34.4507],created_by_name:"WorldGuessr",official:!0,countryMap:"NZ",description_short:"Explore New Zealand's 2 main islands and over 600 smaller islands!"},{name:"Colombia",slug:"colombia",longDescription:"Explore Colombia in WorldGuessr! Discover the vibrant cities, lush rainforests, and rich culture of this South American country.",shortDescription:"Explore Colombia's 32 departments and diverse ecosystems!",maxDist:2352.2,countryCode:"CO",extent:[-79,-4.231687,-66.876325,12.437303],created_by_name:"WorldGuessr",official:!0,countryMap:"CO",description_short:"Explore Colombia's 32 departments and diverse ecosystems!"},{name:"Malaysia",slug:"malaysia",longDescription:"Explore Malaysia in WorldGuessr! Discover the vibrant cities, stunning beaches, and rich cultural diversity of this Southeast Asian country.",shortDescription:"Explore Malaysia's 13 states and 3 federal territories!",maxDist:2239.742,countryCode:"MY",extent:[99.6433,.8554,119.5108,7.3634],created_by_name:"WorldGuessr",official:!0,countryMap:"MY",description_short:"Explore Malaysia's 13 states and 3 federal territories!"},{name:"Peru",slug:"peru",longDescription:"Explore Peru in WorldGuessr! From the ancient ruins of Machu Picchu to the vibrant city of Lima, discover the rich history and culture of Peru.",shortDescription:"Explore Peru's 25 regions and the world's largest rainforest!",maxDist:2114.034,countryCode:"PE",extent:[-81.326,-18.349,-68.673,-.038],created_by_name:"WorldGuessr",official:!0,countryMap:"PE",description_short:"Explore Peru's 25 regions and the world's largest rainforest!"},{name:"Philippines",slug:"philippines",longDescription:"Explore the Philippines in WorldGuessr! Discover the stunning beaches, vibrant cities, and rich culture of this Southeast Asian archipelago.",shortDescription:"Explore the Philippines' 7,641 islands and over 175 languages!",maxDist:1976.332,countryCode:"PH",extent:[116.928,4.64,126.6,21.1],created_by_name:"WorldGuessr",official:!0,countryMap:"PH",description_short:"Explore the Philippines' 7,641 islands and over 175 languages!"},{name:"Norway",slug:"norway",longDescription:"Explore Norway in WorldGuessr! Discover the stunning fjords, Northern Lights, and rich cultural heritage of this Scandinavian country.",shortDescription:"Explore Norway's 11 counties and over 1,000 fjords!",maxDist:1942.584,countryCode:"NO",extent:[4.630834,57.9775,31.078056,71.188333],created_by_name:"WorldGuessr",official:!0,countryMap:"NO",description_short:"Explore Norway's 11 counties and over 1,000 fjords!"},{name:"South Africa",slug:"south-africa",longDescription:"Explore South Africa in WorldGuessr! Discover the diverse cultures, stunning landscapes, and vibrant cities of this southernmost African country.",shortDescription:"Explore South Africa's 9 provinces and 11 official languages!",maxDist:1905.569,countryCode:"ZA",extent:[16.344976,-34.8335,32.891667,-22.125069],created_by_name:"WorldGuessr",official:!0,countryMap:"ZA",description_short:"Explore South Africa's 9 provinces and 11 official languages!"},{name:"Portugal",slug:"portugal",longDescription:"Explore Portugal in WorldGuessr! Discover the historic cities, beautiful beaches, and rich cultural heritage of this Southern European country.",shortDescription:"Explore Portugal's 18 districts and 800 km of coastline!",maxDist:1837.279,countryCode:"PT",extent:[-31.266667,32.638889,-6.189167,42.154167],created_by_name:"WorldGuessr",official:!0,countryMap:"PT",description_short:"Explore Portugal's 18 districts and 800 km of coastline!"},{name:"Turkey",slug:"turkey",longDescription:"Explore Turkey in WorldGuessr! Discover the rich history, vibrant cities, and diverse landscapes of this transcontinental country.",shortDescription:"Explore Turkey's 81 provinces and over 2,000 years of history!",maxDist:1696.647,countryCode:"TR",extent:[25.668056,35.808333,44.793056,42.1075],created_by_name:"WorldGuessr",official:!0,countryMap:"TR",description_short:"Explore Turkey's 81 provinces and over 2,000 years of history!"},{name:"Thailand",slug:"thailand",longDescription:"Explore Thailand in WorldGuessr! Discover the stunning beaches, vibrant cities, and rich cultural heritage of this Southeast Asian country.",shortDescription:"Explore Thailand's 77 provinces and the world's longest reign by a monarch!",maxDist:1657.708,countryCode:"TH",extent:[97.345,5.61,105.639,20.464],created_by_name:"WorldGuessr",official:!0,countryMap:"TH",description_short:"Explore Thailand's 77 provinces and the world's longest reign by a monarch!"},{name:"Sweden",slug:"sweden",longDescription:"Explore Sweden in WorldGuessr! Discover the stunning landscapes, vibrant cities, and rich cultural heritage of this Scandinavian country.",shortDescription:"Explore Sweden's 21 counties and over 100,000 lakes!",maxDist:1592.015,countryCode:"SE",extent:[11.1475,55.34,24.1675,69.06],created_by_name:"WorldGuessr",official:!0,countryMap:"SE",description_short:"Explore Sweden's 21 counties and over 100,000 lakes!"},{name:"Nigeria",slug:"nigeria",longDescription:"Explore Nigeria in WorldGuessr! Discover the diverse culture, vibrant cities, and rich history of Africa's most populous country.",shortDescription:"Explore Nigeria's 36 states and over 500 ethnic groups!",maxDist:1470.5,countryCode:"NG",extent:[3.3375,4.2775,14.6775,13.8925],created_by_name:"WorldGuessr",official:!0,countryMap:"NG",description_short:"Explore Nigeria's 36 states and over 500 ethnic groups!"},{name:"France",slug:"france",longDescription:"Explore France in WorldGuessr! Discover the Eiffel Tower, the French Riviera, and the diverse culture and landscapes of France.",shortDescription:"Explore France's 18 regions and 1,200+ cheeses!",maxDist:1400,countryCode:"FR",extent:[-5.142222,41.333738,9.560016,51.124199],created_by_name:"WorldGuessr",official:!0,countryMap:"FR",description_short:"Explore France's 18 regions and 1,200+ cheeses!"},{name:"United Kingdom",slug:"united-kingdom",longDescription:"Explore the United Kingdom in WorldGuessr! Discover the historic cities, beautiful countryside, and rich cultural heritage of England, Scotland, Wales, and Northern Ireland.",shortDescription:"Explore the UK's 4 nations and over 32 UNESCO World Heritage sites!",maxDist:1400,countryCode:"GB",extent:[-8.6175,49.959999,1.749444,60.845001],created_by_name:"WorldGuessr",official:!0,countryMap:"GB",description_short:"Explore the UK's 4 nations and over 32 UNESCO World Heritage sites!"},{name:"Italy",slug:"italy",longDescription:"Explore Italy in WorldGuessr! From the ruins of Rome to the canals of Venice, experience the rich history, culture, and cuisine of Italy.",shortDescription:"Explore Italy's 20 regions and 55 UNESCO World Heritage sites!",maxDist:1317.252,countryCode:"IT",extent:[6.627265,36.649647,18.520244,47.094649],created_by_name:"WorldGuessr",official:!0,countryMap:"IT",description_short:"Explore Italy's 20 regions and 55 UNESCO World Heritage sites!"},{name:"Finland",slug:"finland",longDescription:"Explore Finland in WorldGuessr! From the Northern Lights to the thousands of lakes, immerse yourself in the natural beauty and unique culture of Finland.",shortDescription:"Explore Finland's 19 regions and over 188,000 lakes!",maxDist:1266.549,countryCode:"FI",extent:[20.556335,59.846373,31.516092,70.092295],created_by_name:"WorldGuessr",official:!0,countryMap:"FI",description_short:"Explore Finland's 19 regions and over 188,000 lakes!"},{name:"Kenya",slug:"kenya",longDescription:"Explore Kenya in WorldGuessr! From the savannas to the bustling city of Nairobi, discover the diverse wildlife and landscapes of Kenya.",shortDescription:"Explore Kenya's 47 counties and the Great Rift Valley!",maxDist:1208.97,countryCode:"KE",extent:[33.908859,-4.67677,41.899975,4.6225],created_by_name:"WorldGuessr",official:!0,countryMap:"KE",description_short:"Explore Kenya's 47 counties and the Great Rift Valley!"},{name:"Greece",slug:"greece",longDescription:"Explore Greece in WorldGuessr! Discover the ancient ruins, beautiful islands, and rich culture of this Mediterranean country.",shortDescription:"Explore Greece's 13 regions and 6,000+ islands!",maxDist:1005.522,countryCode:"GR",extent:[19.3736,34.802144,28.217753,41.748306],created_by_name:"WorldGuessr",official:!0,countryMap:"GR",description_short:"Explore Greece's 13 regions and 6,000+ islands!"},{name:"Germany",slug:"germany",longDescription:"Explore Germany in WorldGuessr! From the Black Forest to Berlin, discover the rich history, culture, and landscapes of Germany.",shortDescription:"Explore Germany's 16 states and 300+ types of bread!",maxDist:906.917,countryCode:"DE",extent:[5.866315,47.302487,15.041896,55.058142],created_by_name:"WorldGuessr",official:!0,countryMap:"DE",description_short:"Explore Germany's 16 states and 300+ types of bread!"},{name:"Ghana",slug:"ghana",longDescription:"Explore Ghana in WorldGuessr! From the historical sites of Cape Coast to the colorful markets of Accra, experience the warmth and hospitality of this West African nation.",shortDescription:"Discover the vibrant culture and history of Ghana!",maxDist:854.901,countryCode:"GH",extent:[-3.255,4.736,1.199,11.173],created_by_name:"WorldGuessr",official:!0,countryMap:"GH",description_short:"Discover the vibrant culture and history of Ghana!"},{name:"Poland",slug:"poland",longDescription:"Explore Poland in WorldGuessr! Discover the historic cities, beautiful countryside, and rich cultural heritage of this Central European country.",shortDescription:"Explore Poland's 16 voivodeships and over 100 castles!",maxDist:827.137,countryCode:"PL",extent:[14.122592,49.002494,24.145815,54.836582],created_by_name:"WorldGuessr",official:!0,countryMap:"PL",description_short:"Explore Poland's 16 voivodeships and over 100 castles!"},{name:"Bangladesh",slug:"bangladesh",longDescription:"Explore Bangladesh in WorldGuessr! From the lush landscapes of the Sundarbans to the vibrant streets of Dhaka, discover the rich culture and natural beauty of this South Asian gem.",shortDescription:"Discover the beauty of Bangladesh's diverse landscapes!",maxDist:809.854,countryCode:"BD",extent:[88.028,20.743,92.673,26.631],created_by_name:"WorldGuessr",official:!0,countryMap:"BD",description_short:"Discover the beauty of Bangladesh's diverse landscapes!"},{name:"Romania",slug:"romania",longDescription:"Explore Romania in WorldGuessr! Discover the historic castles, beautiful mountains, and rich culture of this Eastern European country.",shortDescription:"Explore Romania's 41 counties and the legend of Dracula!",maxDist:770.108,countryCode:"RO",extent:[20.261111,43.6275,29.691111,48.265],created_by_name:"WorldGuessr",official:!0,countryMap:"RO",description_short:"Explore Romania's 41 counties and the legend of Dracula!"},{name:"South Korea",slug:"south-korea",longDescription:"Explore South Korea in WorldGuessr! Discover the blend of ancient traditions and modern technology in this East Asian country.",shortDescription:"Explore South Korea's 9 provinces and over 5,000 years of history!",maxDist:683,countryCode:"KR",extent:[124.6137,33.0041,131.8725,38.6125],created_by_name:"WorldGuessr",official:!0,countryMap:"KR",description_short:"Explore South Korea's 9 provinces and over 5,000 years of history!"},{name:"Panama",slug:"panama",longDescription:"Explore Panama in WorldGuessr! From the iconic Panama Canal to the lush rainforests, discover the diverse ecosystems and vibrant culture of this Central American country.",shortDescription:"Experience the wonders of Panama's natural beauty!",maxDist:655.405,countryCode:"PA",extent:[-83.051,7.206,-77.174,9.634],created_by_name:"WorldGuessr",official:!0,countryMap:"PA",description_short:"Experience the wonders of Panama's natural beauty!"},{name:"Bulgaria",slug:"bulgaria",longDescription:"Explore Bulgaria in WorldGuessr! Discover the rich history, beautiful mountains, and cultural diversity of this Eastern European country.",shortDescription:"Explore Bulgaria's 28 provinces and rich history!",maxDist:582.029,countryCode:"BG",extent:[22.345023,41.238104,28.603526,44.228434],created_by_name:"WorldGuessr",official:!0,countryMap:"BG",description_short:"Explore Bulgaria's 28 provinces and rich history!"},{name:"Austria",slug:"austria",longDescription:"Explore Austria in WorldGuessr! From the Alps to the historic cities like Vienna, discover the rich cultural heritage and stunning landscapes of Austria.",shortDescription:"Explore Austria's 9 federal states!",maxDist:577.829,countryCode:"AT",extent:[9.530952,46.372276,16.979667,49.039074],created_by_name:"WorldGuessr",official:!0,countryMap:"AT",description_short:"Explore Austria's 9 federal states!"},{name:"Ireland",slug:"ireland",longDescription:"Explore Ireland in WorldGuessr! Discover the lush green landscapes, historic castles, and vibrant culture of the Emerald Isle.",shortDescription:"Explore Ireland's 4 provinces and over 30,000 castles!",maxDist:570.923,countryCode:"IE",extent:[-10.478097,51.447548,-6.032985,55.387635],created_by_name:"WorldGuessr",official:!0,countryMap:"IE",description_short:"Explore Ireland's 4 provinces and over 30,000 castles!"},{name:"Croatia",slug:"croatia",longDescription:"Explore Croatia in WorldGuessr! From the historic cities of Dubrovnik to the beautiful Plitvice Lakes, discover the rich culture and stunning landscapes of this Mediterranean country.",shortDescription:"Experience the beauty and history of Croatia!",maxDist:537.169,countryCode:"HR",extent:[13.493,42.393,19.426,46.554],created_by_name:"WorldGuessr",official:!0,countryMap:"HR",description_short:"Experience the beauty and history of Croatia!"},{name:"Latvia",slug:"latvia",longDescription:"Explore Latvia in WorldGuessr! From the picturesque streets of Riga to the stunning coastline, experience the beauty and culture of this Baltic state.",shortDescription:"Discover the enchanting landscapes of Latvia!",maxDist:532.265,countryCode:"LV",extent:[20.974,55.675,28.241,58.085],created_by_name:"WorldGuessr",official:!0,countryMap:"LV",description_short:"Discover the enchanting landscapes of Latvia!"},{name:"Hungary",slug:"hungary",longDescription:"Explore Hungary in WorldGuessr! Discover the historic cities, thermal baths, and rich cultural heritage of this Central European country.",shortDescription:"Explore Hungary's 19 counties and 1,500+ thermal springs!",maxDist:525.881,countryCode:"HU",extent:[16.113889,45.737128,22.896748,48.585258],created_by_name:"WorldGuessr",official:!0,countryMap:"HU",description_short:"Explore Hungary's 19 counties and 1,500+ thermal springs!"},{name:"Denmark",slug:"denmark",longDescription:"Explore Denmark in WorldGuessr! From the historic city of Copenhagen to the scenic coastal landscapes, discover the charm of this Scandinavian country.",shortDescription:"Explore Denmark's 5 regions and over 400 islands!",maxDist:518.274,countryCode:"DK",extent:[8.089977,54.800014,15.151377,57.748417],created_by_name:"WorldGuessr",official:!0,countryMap:"DK",description_short:"Explore Denmark's 5 regions and over 400 islands!"},{name:"Sri Lanka",slug:"sri-lanka",longDescription:"Explore Sri Lanka in WorldGuessr! From the ancient cities to the lush tea plantations, experience the island's rich history and natural beauty.",shortDescription:"Discover the diverse landscapes of Sri Lanka!",maxDist:505.193,countryCode:"LK",extent:[79.652,5.917,81.88,9.835],created_by_name:"WorldGuessr",official:!0,countryMap:"LK",description_short:"Discover the diverse landscapes of Sri Lanka!"},{name:"Czech Republic",slug:"czech-republic",longDescription:"Explore the Czech Republic in WorldGuessr! Discover the historic castles, charming towns, and vibrant culture of this Central European country.",shortDescription:"Explore the Czech Republic's 14 regions and over 2,000 castles!",maxDist:490.955,countryCode:"CZ",extent:[12.09024,48.551808,18.859216,51.055703],created_by_name:"WorldGuessr",official:!0,countryMap:"CZ",description_short:"Explore the Czech Republic's 14 regions and over 2,000 castles!"},{name:"Israel",slug:"israel",longDescription:"Explore Israel in WorldGuessr! Discover the ancient cities, religious sites, and diverse culture of this Middle Eastern country.",shortDescription:"Explore Israel's 6 districts and the Dead Sea, the lowest point on Earth!",maxDist:439.764,countryCode:"IL",extent:[34.265433,29.501326,35.836396,33.277426],created_by_name:"WorldGuessr",official:!0,countryMap:"IL",description_short:"Explore Israel's 6 districts and the Dead Sea, the lowest point on Earth!"},{name:"Slovakia",slug:"slovakia",longDescription:"Explore Slovakia in WorldGuessr! From the majestic Tatra Mountains to the historic castles, discover the rich history and stunning landscapes of this Central European country.",shortDescription:"Experience Slovakia's beautiful nature and history!",maxDist:427.884,countryCode:"SK",extent:[16.833,47.758,22.558,49.603],created_by_name:"WorldGuessr",official:!0,countryMap:"SK",description_short:"Experience Slovakia's beautiful nature and history!"},{name:"Lithuania",slug:"lithuania",longDescription:"Explore Lithuania in WorldGuessr! From the historic capital of Vilnius to the beautiful Curonian Spit, discover the rich heritage and nature of this Baltic nation.",shortDescription:"Experience the charm of Lithuania's cities and landscapes!",maxDist:395.23,countryCode:"LT",extent:[20.941,53.896,26.835,56.452],created_by_name:"WorldGuessr",official:!0,countryMap:"LT",description_short:"Experience the charm of Lithuania's cities and landscapes!"},{name:"Switzerland",slug:"switzerland",longDescription:"Explore Switzerland in WorldGuessr! Discover the stunning Alps, charming cities, and rich cultural heritage of this Central European country.",shortDescription:"Explore Switzerland's 26 cantons and over 7,000 lakes!",maxDist:358.077,countryCode:"CH",extent:[5.955,45.8175,10.491667,47.808333],created_by_name:"WorldGuessr",official:!0,countryMap:"CH",description_short:"Explore Switzerland's 26 cantons and over 7,000 lakes!"},{name:"Belgium",slug:"belgium",longDescription:"Explore Belgium in WorldGuessr! Discover the medieval towns, vibrant cities, and rich cultural heritage in the heart of Europe.",shortDescription:"Explore Belgium's 3 regions and over 800 types of beer!",maxDist:344.702,countryCode:"BE",extent:[2.513573,49.529484,6.156658,51.475024],created_by_name:"WorldGuessr",official:!0,countryMap:"BE",description_short:"Explore Belgium's 3 regions and over 800 types of beer!"},{name:"Bhutan",slug:"bhutan",longDescription:"Explore Bhutan in WorldGuessr! From the stunning monasteries perched on cliffs to the vibrant festivals, discover the spiritual beauty and culture of the 'Land of the Thunder Dragon'.",shortDescription:"Experience Bhutan's unique culture and landscapes!",maxDist:336.05,countryCode:"BT",extent:[88.745,26.702,92.125,28.325],created_by_name:"WorldGuessr",official:!0,countryMap:"BT",description_short:"Experience Bhutan's unique culture and landscapes!"},{name:"Netherlands",slug:"netherlands",longDescription:"Explore the Netherlands in WorldGuessr! Discover the iconic windmills, tulip fields, and vibrant cities of this European country.",shortDescription:"Explore the Netherlands' 12 provinces and over 4,000 km of canals!",maxDist:300,countryCode:"NL",extent:[3.314971,50.803721,7.092053,53.510403],created_by_name:"WorldGuessr",official:!0,countryMap:"NL",description_short:"Explore the Netherlands' 12 provinces and over 4,000 km of canals!"},{name:"Slovenia",slug:"slovenia",longDescription:"Explore Slovenia in WorldGuessr! From the stunning Lake Bled to the charming streets of Ljubljana, experience the natural beauty and cultural heritage of this picturesque country.",shortDescription:"Discover Slovenia's enchanting landscapes and cities!",maxDist:262.014,countryCode:"SI",extent:[13.375,45.421,16.6,46.876],created_by_name:"WorldGuessr",official:!0,countryMap:"SI",description_short:"Discover Slovenia's enchanting landscapes and cities!"},{name:"Lesotho",slug:"lesotho",longDescription:"Explore Lesotho in WorldGuessr! Known as the 'Kingdom in the Sky', experience its breathtaking mountain scenery and vibrant culture.",shortDescription:"Discover the unique beauty of Lesotho's highlands!",maxDist:242.916,countryCode:"LS",extent:[27.011,-30.659,29.455,-28.57],created_by_name:"WorldGuessr",official:!0,countryMap:"LS",description_short:"Discover the unique beauty of Lesotho's highlands!"},{name:"Montenegro",slug:"montenegro",longDescription:"Explore Montenegro in WorldGuessr! From the stunning fjords of Kotor to the beautiful beaches, experience the breathtaking landscapes and rich history of this Balkan nation.",shortDescription:"Discover the scenic beauty of Montenegro!",maxDist:193.061,countryCode:"ME",extent:[18.433,41.848,20.358,43.558],created_by_name:"WorldGuessr",official:!0,countryMap:"ME",description_short:"Discover the scenic beauty of Montenegro!"},{name:"Singapore",slug:"singapore",longDescription:"Explore Singapore in WorldGuessr! From the iconic skyline to the lush gardens, experience the vibrant culture and modern attractions of this city-state.",shortDescription:"Discover the dynamic city of Singapore!",maxDist:63.278,countryCode:"SG",extent:[103.638,1.257,104.082,1.47],created_by_name:"WorldGuessr",official:!0,countryMap:"SG",description_short:"Discover the dynamic city of Singapore!"}]};var p=r(3603),m=r(5364),g=r(5364);function x(e){var t,r,i,l,d;let x,{gameOptions:y,mapModalClosing:f,setGameOptions:v,showOptions:_,close:b,session:D,text:E,onMapClick:C,chosenMap:N,showAllCountriesOption:j,makeMap:w,setMakeMap:G,initMakeMap:M,searchTerm:S,setSearchTerm:W,searchResults:k,setSearchResults:L}=e,[A,R]=(0,o.useState)({message:E("loading")+"..."}),[T,I]=(0,o.useState)(""),[O,P]=(0,o.useState)(!0),[F,H]=(0,o.useState)({}),{handleSearch:B}={handleSearch:(0,o.useCallback)((d=e=>{if(e.length>3&&!m.env.NEXT_PUBLIC_COOLMATH){var t,r;fetch(((null==(t=window.cConfig)?void 0:t.apiUrl)||(0,p.A)().apiUrl)+"/api/map/searchMap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,secret:null==D||null==(r=D.token)?void 0:r.secret})}).then(e=>e.json()).then(e=>{L(e)}).catch(()=>{s.oR.error("Failed to search maps")})}else L([])},function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];clearTimeout(x),x=setTimeout(()=>d.apply(null,t),300)}),[null==D||null==(l=D.token)?void 0:l.secret,L])};function U(e){var t,r;if(e)return void R(t=>{let r={...t};return Object.keys(r).forEach(t=>{r[t]=r[t].filter(t=>t.id!==e.removeMap)}),r});P(!0),window.cConfig=(0,p.A)();let n=setTimeout(()=>{R(h),P(!1)},5e3);fetch(window.cConfig.apiUrl+"/api/map/mapHome",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((null==D||null==(t=D.token)?void 0:t.secret)?{secret:null==D||null==(r=D.token)?void 0:r.secret,inCG:window.inCrazyGames}:{})}).then(e=>e.json()).then(e=>{R(e),P(!1),clearTimeout(n)}).catch(()=>{R(h),P(!1)})}(0,o.useEffect)(()=>{B(S)},[S,B]),(0,o.useEffect)(()=>{let e;U();let t=()=>{clearTimeout(e),e=setTimeout(()=>{H(e=>({...e}))},150)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),clearTimeout(e)}},[null==D||null==(t=D.token)?void 0:t.secret]);let z=Object.keys(A).filter(e=>"message"!==e).some(e=>("recent"===e&&k.length>0?k:A[e].filter(e=>{var t,r,n;return(null==(t=e.name)?void 0:t.toLowerCase().includes(null==S?void 0:S.toLowerCase()))||(null==(r=e.description_short)?void 0:r.toLowerCase().includes(null==S?void 0:S.toLowerCase()))||(null==(n=e.created_by_name)?void 0:n.toLowerCase().includes(null==S?void 0:S.toLowerCase()))})).length>0),K=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",r=document.querySelector(".mapView");if(!r)return window.innerWidth>=1400?6:window.innerWidth>=1200?5:window.innerWidth>=1e3?4:window.innerWidth>=768?3:2;let n=r.clientWidth-40,o=16;return window.innerWidth<=480?o=8:window.innerWidth<=768&&(o=12),"countryMaps"===t?window.innerWidth<=360?e=100:window.innerWidth<=480?e=120:window.innerWidth<=768?e=150:window.innerWidth<=1e3?e=170:(window.innerWidth,e=180):e=window.innerWidth<=360?120:window.innerWidth<=480?140:window.innerWidth<=768?170:window.innerWidth<=1e3?190:window.innerWidth<=1200?200:window.innerWidth<=1400?220:200,Math.max(1,Math.floor((n+o)/(e+o)))};return w.open?(0,n.jsxs)("div",{className:"mapView ".concat(f?"slideout_right":""),children:[(0,n.jsx)("div",{className:"map-header",children:(0,n.jsxs)("div",{className:"map-header-left",children:[(0,n.jsxs)("button",{onClick:()=>G({...w,open:!1}),className:"map-back-btn",children:[(0,n.jsx)(a.QVr,{})," ",E("back")]}),(0,n.jsx)("h1",{className:"map-title",children:(null==w?void 0:w.edit)?"Edit Map":"Make Map"})]})}),(0,n.jsx)(c,{map:w,setMap:G,createMap:function(e){var t,r,n;if(!(null==D||null==(t=D.token)?void 0:t.secret))return void s.oR.error("Not logged in");fetch((null==(r=window.cConfig)?void 0:r.apiUrl)+"/api/map/action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:w.edit?"edit":"create",mapId:w.mapId,secret:null==D||null==(n=D.token)?void 0:n.secret,name:e.name,description_short:e.description_short,description_long:e.description_long,data:e.data})}).then(async e=>{let t;try{t=await e.json()}catch(e){s.oR.error("Max file limit 30mb"),G({...w,progress:!1});return}e.ok?(s.oR.success("Map "+(w.edit?"edited":"created")),G(M),U()):(G({...w,progress:!1}),s.oR.error(t.message))}).catch(()=>{G({...w,progress:!1}),s.oR.error("Unexpected Error creating map - 2")})}})]}):(0,n.jsxs)("div",{className:"mapView ".concat(f?"slideout_right":""),children:[(0,n.jsxs)("div",{className:"map-header",children:[(0,n.jsxs)("div",{className:"map-header-left",children:[(0,n.jsxs)("button",{onClick:b,className:"map-back-btn",children:[(0,n.jsx)(a.QVr,{})," ",E("close")]}),(0,n.jsx)("h1",{className:"map-title",children:E("maps")})]}),(null==D||null==(r=D.token)?void 0:r.secret)&&(0,n.jsxs)("button",{onClick:()=>G({...w,open:!0}),className:"map-create-btn",children:[(0,n.jsx)(a.OiG,{})," Make Map"]})]}),(0,n.jsx)("div",{className:"map-search-section",children:(0,n.jsxs)("div",{className:"map-search-container",children:[(0,n.jsx)(a.KSO,{className:"map-search-icon"}),(0,n.jsx)("input",{type:"text",placeholder:E("searchForMaps"),className:"map-search-input",value:S,onChange:e=>W(e.target.value)})]})}),_&&(0,n.jsxs)("div",{className:"map-options",children:[(0,n.jsxs)("div",{className:"map-option",children:[(0,n.jsx)("input",{type:"checkbox",id:"nm",checked:y.nm,onChange:e=>v({...y,nm:e.target.checked})}),(0,n.jsx)("label",{htmlFor:"nm",children:E("nm")})]}),(0,n.jsxs)("div",{className:"map-option",children:[(0,n.jsx)("input",{type:"checkbox",id:"npz",checked:y.npz,onChange:e=>v({...y,npz:e.target.checked})}),(0,n.jsx)("label",{htmlFor:"npz",children:E("npz")})]}),(0,n.jsxs)("div",{className:"map-option",children:[(0,n.jsx)("input",{type:"checkbox",id:"showRoadName",checked:y.showRoadName,onChange:e=>v({...y,showRoadName:e.target.checked})}),(0,n.jsx)("label",{htmlFor:"showRoadName",children:E("showRoadName")})]})]}),O&&(0,n.jsxs)("div",{className:"maps-loading",children:[(0,n.jsx)("div",{className:"maps-loading-spinner"}),(0,n.jsxs)("div",{className:"maps-loading-text",children:[E("loading"),"..."]})]}),!O&&(0,n.jsxs)(n.Fragment,{children:[j&&(0===S.length||(null==(i=E("allCountries"))?void 0:i.toLowerCase().includes(null==S?void 0:S.toLowerCase())))&&(0,n.jsx)("div",{className:"all-countries-tile",children:(0,n.jsx)(u,{bgImage:'url("/world.jpg")',forcedWidth:"300px",map:{name:E("allCountries"),slug:"all"},onClick:()=>C({name:E("allCountries"),slug:"all"}),searchTerm:S})}),z?Object.keys(A).filter(e=>"message"!==e).filter(e=>!g.env.NEXT_PUBLIC_COOLMATH||"recent"!==e).map((e,t)=>{let r="recent"===e&&k.length>0?k:A[e].filter(e=>{var t,r,n;return(null==(t=e.name)?void 0:t.toLowerCase().includes(S.toLowerCase()))||(null==(r=e.description_short)?void 0:r.toLowerCase().includes(S.toLowerCase()))||(null==(n=e.created_by_name)?void 0:n.toLowerCase().includes(null==S?void 0:S.toLowerCase()))});if(0===r.length)return null;let o=F[e]||"recent"===e,i=("popular"===e?2:"spotlight"===e?1:2)*K(e),l=r.length>i&&"recent"!==e,c=o?r:r.slice(0,i);return(0,n.jsxs)("div",{className:"map-section",children:[(0,n.jsxs)("h2",{id:e+"_map_view_section",className:"map-section-title",children:[E(e),["myMaps","likedMaps","reviewQueue"].includes(e)&&" (".concat(r.length,")")]}),(0,n.jsxs)("div",{className:"map-section-container",children:[(0,n.jsx)("div",{className:"map-grid ".concat("countryMaps"===e?"country-maps":""," ").concat("popular"===e?"popular-maps":""," ").concat("spotlight"===e?"spotlight-maps":""," ").concat(o||"recent"===e?"expanded":"collapsed"),children:c.map((t,r)=>{var o,a,i,l;return(0,n.jsx)(u,{map:t,canHeart:(null==D||null==(o=D.token)?void 0:o.secret)&&T!==t.id,onClick:()=>C(t),country:t.countryMap,searchTerm:S,secret:null==D||null==(a=D.token)?void 0:a.secret,refreshHome:U,showEditControls:t.yours&&"myMaps"===e||(null==D||null==(i=D.token)?void 0:i.staff),showReviewOptions:(null==D||null==(l=D.token)?void 0:l.staff)&&"reviewQueue"===e,onPencilClick:e=>{G({...M,open:!0,edit:!0,mapId:e.id,name:e.name,description_short:e.description_short,description_long:e.description_long,data:e.data.map(e=>JSON.stringify(e))})},onHeart:()=>(function(e){var t,r,n;if(!(null==D||null==(t=D.token)?void 0:t.secret))return void s.oR.error("Not logged in");I(e.id),fetch((null==(r=window.cConfig)?void 0:r.apiUrl)+"/api/map/heartMap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:null==D||null==(n=D.token)?void 0:n.secret,mapId:e.id})}).then(async t=>{let r;I("");try{r=await t.json()}catch(e){s.oR.error("Unexpected Error hearting map - 1");return}if(t.ok&&r.success){(0,s.oR)(r.hearted?E("heartedMap"):E("unheartedMap"),{type:r.hearted?"success":"info"});let t=r.hearts;R(n=>{let o={...n};return Object.keys(o).forEach(n=>{o[n]=o[n].map(n=>(n.id===e.id&&(n.hearts=t,n.hearted=r.hearted),n)),"likedMaps"===n&&(r.hearted?o[n].push(e):o[n]=o[n].filter(t=>t.id!==e.id))}),o}),k.length>0&&L(n=>n.map(n=>(n.id===e.id&&(n.hearts=t,n.hearted=r.hearted),n)))}else s.oR.error(E(r.message||r.error||"unexpectedError"))}).catch(e=>{I(""),console.log(e),s.oR.error("Unexpected Error hearting map - 2")})})(t)},t.id||r)})}),l&&(0,n.jsx)("button",{className:"show-more-btn",onClick:()=>{H(t=>(setTimeout(()=>{let r=document.getElementById(e+"_map_view_section");if(r){let n=r.getBoundingClientRect().top,o=window.innerHeight;console.log(n,100,o),t[e]&&(n<0||n+100>o)&&r.scrollIntoView({behavior:"smooth",block:"start"})}},100),{...t,[e]:!t[e]}))},children:o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Ucs,{}),"Show Less"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.Vr3,{}),"Show All"]})})]})]},t)}):(0,n.jsxs)("div",{className:"no-results",children:[(0,n.jsx)(a.ZYm,{className:"no-results-icon"}),(0,n.jsx)("h3",{className:"no-results-title",children:E("noResultsFound")}),(0,n.jsx)("p",{className:"no-results-text",children:"Try adjusting your search terms or browse our featured maps."})]})]})]})}}}]);