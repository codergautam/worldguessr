(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[845],{35:(e,n,t)=>{"use strict";t.d(n,{N:()=>i,V:()=>c});var r=t(4232),l=t(5947),a=t(5073),s=t(1567),o=t(8420);function i(e,n){(0,r.useEffect)(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){n.layerContainer?.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function c(e){return function(n){let t=(0,a.U$)(),r=e((0,o.P)(n,t),t);return(0,l.z)(t.map,n.attribution),(0,s.x)(r.current,n.eventHandlers),i(r.current,t),r}}},723:(e,n,t)=>{"use strict";t.d(n,{T:()=>a});var r=t(4232),l=t(5073);function a(e){return function(n){let t=(0,l.U$)(),a=e(n,t),{instance:s}=a.current,o=(0,r.useRef)(n.position),{position:i}=n;return(0,r.useEffect)(function(){return s.addTo(t.map),function(){s.remove()}},[t.map,s]),(0,r.useEffect)(function(){null!=i&&i!==o.current&&(s.setPosition(i),o.current=i)},[s,i]),a}}},1226:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>j});var r=t(7876),l=t(4232),a=t(8847),s=t(3138),o=t(7152),i=t(8040),c=t(6594),d=t(1173),u=t(3679),p=t(5259),m=t(8546),g=t(2446);t(1782);var h=t(6895);function x(e){let{isOpen:n,onClose:t,reportedUser:a,gameId:s,gameType:o,session:i}=e,{t:c}=(0,d.B)("common"),[u,p]=(0,l.useState)(""),[m,x]=(0,l.useState)(""),[f,y]=(0,l.useState)(!1),[v,b]=(0,l.useState)(0),j=async()=>{var e;if(!u)return void g.oR.error("Please select a reason for the report");if(!m.trim())return void g.oR.error("Please provide a description");if(v<5)return void g.oR.error("Please provide a more detailed description (at least 5 words)");if(!(null==i||null==(e=i.token)?void 0:e.secret))return void g.oR.error("You must be logged in to submit a report");y(!0);try{let e=await fetch(window.cConfig.apiUrl+"/api/submitReport",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:i.token.secret,reportedUserAccountId:a.accountId,reason:u,description:m.trim(),gameId:s,gameType:o})});if(e.ok)g.oR.success("Report submitted successfully. Our moderators will review it."),p(""),x(""),b(0),t();else{let n=await e.json();g.oR.error(n.message||"Failed to submit report")}}catch(e){console.error("Error submitting report:",e),g.oR.error("Network error occurred")}finally{y(!1)}};return(0,r.jsx)(h.A,{isOpen:n,onClose:t,title:"Report ".concat((null==a?void 0:a.username)||"Player"),disableBackdropClose:!0,actions:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:t,disabled:f,style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:"Cancel"}),(0,r.jsx)("button",{onClick:j,disabled:f||!u||!m.trim(),style:{opacity:!f&&u&&m.trim()?1:.5},children:f?"Submitting...":"Submit Report"})]}),children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,r.jsx)("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.8)",fontSize:"14px"},children:"Please provide details about why you are reporting this player. False reports may result in restrictions."}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"white"},children:"Reason for Report *"}),(0,r.jsxs)("select",{value:u,onChange:e=>p(e.target.value),disabled:f,style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.05)",color:"white",fontSize:"14px",fontFamily:'"Lexend", sans-serif',cursor:"pointer"},children:[(0,r.jsx)("option",{value:"",style:{background:"#1a1a1a"},children:"-- Select a reason --"}),[{value:"inappropriate_username",label:"Inappropriate Username"},{value:"cheating",label:"Cheating"},{value:"other",label:"Other"}].map(e=>(0,r.jsx)("option",{value:e.value,style:{background:"#1a1a1a"},children:e.label},e.value))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"white",display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)("span",{children:"Description *"}),(0,r.jsxs)("span",{style:{fontSize:"12px",color:v>100?"#ff6b6b":"rgba(255, 255, 255, 0.6)",fontWeight:"normal"},children:[v,"/100 words"]})]}),(0,r.jsx)("textarea",{value:m,onChange:e=>{let n=e.target.value,t=n.trim().split(/\s+/).filter(e=>e.length>0);b(t.length),t.length<=100&&x(n)},disabled:f,placeholder:"Please describe the issue in detail...",rows:6,style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.05)",color:"white",fontSize:"14px",fontFamily:'"Lexend", sans-serif',resize:"vertical",minHeight:"120px"}}),(0,r.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"12px",color:"rgba(255, 255, 255, 0.5)"},children:"Provide as much detail as possible. Minimum 5 words required."})]}),(0,r.jsxs)("div",{style:{padding:"12px",background:"rgba(255, 152, 0, 0.1)",border:"1px solid rgba(255, 152, 0, 0.3)",borderRadius:"8px",fontSize:"13px",color:"rgba(255, 255, 255, 0.9)"},children:[(0,r.jsx)("strong",{children:"Note:"})," This report will be reviewed by moderators. Abuse of the reporting system may result in action against your account."]})]})})}var f=t(5364);let y=a(()=>t.e(32).then(t.bind(t,1032)).then(e=>e.MapContainer),{loadableGenerated:{webpack:()=>[require.resolveWeak("react-leaflet")]},ssr:!1}),v=a(()=>t.e(32).then(t.bind(t,1032)).then(e=>e.TileLayer),{loadableGenerated:{webpack:()=>[require.resolveWeak("react-leaflet")]},ssr:!1}),b=e=>{let{mapRef:n,onMapReady:t,history:r,onUserInteraction:a}=e,o=(0,s.ko)();return(0,l.useEffect)(()=>{o&&!n.current&&(n.current=o,t(!0),setTimeout(()=>{o.invalidateSize()},100))},[o,n,t]),(0,l.useEffect)(()=>{if(o&&a){let e=()=>{a()};return o.on("zoomstart",e),o.on("movestart",e),o.on("dragstart",e),()=>{o.off("zoomstart",e),o.off("movestart",e),o.off("dragstart",e)}}},[o,a]),null},j=e=>{var n,t,a,s,h,j,w,N,C,k,D,I,L,S;let{history:z,points:R,time:E,maxPoints:M,button1Press:F,button1Text:O,button2Press:T,button2Text:P,duel:U,data:W,hidden:B,multiplayerState:A,session:_,gameId:H,options:q}=e,{t:V}=(0,d.B)("common"),[K,Z]=(0,l.useState)(null),[$,G]=(0,l.useState)(!1),[Q,Y]=(0,l.useState)(!1),[J,X]=(0,l.useState)(!1),[ee,en]=(0,l.useState)(null),[et,er]=(0,l.useState)(!1),[el,ea]=(0,l.useState)(!1),[es,eo]=(0,l.useState)(!1),[ei,ec]=(0,l.useState)(!1),[ed,eu]=(0,l.useState)(null),ep=(0,l.useRef)(null),em=(0,l.useRef)(null),eg=(0,l.useRef)(null),eh=(0,l.useRef)(null),ex=(0,l.useRef)(null),[ef,ey]=(0,l.useState)(0),[ev,eb]=(0,l.useState)((null==W?void 0:W.oldElo)||0),[ej,ew]=(0,l.useState)([]),[eN,eC]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=()=>{window.L?(em.current=window.L.icon({iconUrl:"./dest.png",iconSize:[30,49],iconAnchor:[15,49],popupAnchor:[1,-34]}),eg.current=window.L.icon({iconUrl:"./src.png",iconSize:[30,49],iconAnchor:[15,49],popupAnchor:[1,-34]}),eh.current=window.L.icon({iconUrl:"./src2.png",iconSize:[30,49],iconAnchor:[15,49],popupAnchor:[1,-34]}),Y(!0)):setTimeout(e,100)};e()},[]),(0,l.useEffect)(()=>{if(!U&&R){let e=ef||0,n=Date.now(),t=()=>{let r=Math.min((Date.now()-n)/1200,1);ey(Math.round(e+(R-e)*(r<.7?4*Math.pow(r,3):1-Math.pow(-2*r+2,3)/2))),r<1?requestAnimationFrame(t):ey(R)};requestAnimationFrame(t)}},[R,U]),(0,l.useEffect)(()=>{if(U&&W&&"number"==typeof W.oldElo&&"number"==typeof W.newElo&&!eN){let{oldElo:e,newElo:n}=W,t=Math.abs(n-e),r=e,l=setInterval(()=>{eb(r+=r<n?1:-1),r===n&&(clearInterval(l),eC(!0))},t>0?1500/t:0);return()=>clearInterval(l)}},[U,null==W?void 0:W.oldElo,null==W?void 0:W.newElo,eN]),(0,l.useEffect)(()=>{let e=()=>{if(ex.current){let e=ex.current.scrollTop>20;e!==et&&er(e)}},n=ex.current;if(n)return n.addEventListener("scroll",e),()=>n.removeEventListener("scroll",e)},[et]),(0,l.useEffect)(()=>{if(!U&&R&&M){let e=R/M*100,n=[],t="gold",r="/platinum_star.png",l="#CD7F32",a="#b6b2b2";e<=20?n=[a]:e<=30?n=[a,a]:e<=45?n=[a,a,a]:e<=50?n=[l,l,a]:e<=60?n=[l,l,l]:e<=62?n=[t,l,l]:e<=65?n=[t,t,l]:e<=79?n=[t,t,t]:e<=82?n=[r,t,t]:e<=85?n=[r,r,t]:e<=100&&(n=[r,r,r]),ew(n)}},[R,U,M]);let ek=(e,n,t,r)=>{let l=(t-e)*Math.PI/180,a=(r-n)*Math.PI/180,s=Math.sin(l/2)*Math.sin(l/2)+Math.cos(e*Math.PI/180)*Math.cos(t*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*6371},eD=e=>{if((null==q?void 0:q.units)==="imperial"){let n=.621371*e;return n<.1?"".concat(Math.round(1e3*e*3.28084),"ft"):n<10?"".concat(n.toFixed(1),"mi"):"".concat(Math.round(n),"mi")}return e<1?"".concat(Math.round(1e3*e),"m"):e<10?"".concat(e.toFixed(1),"km"):"".concat(Math.round(e),"km")},eI=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!eM.length)return null;let n=new Map;eM.forEach(e=>{e.players&&Object.entries(e.players).forEach(e=>{let[t,r]=e;n.has(t)||n.set(t,r.username)})});let t=Array.from(n.entries()).map(e=>{let[n,t]=e;return{playerId:n,username:t,totalScore:eM.reduce((e,t)=>{var r,l;return e+((null==(l=t.players)||null==(r=l[n])?void 0:r.points)||0)},0)}}).sort((e,n)=>n.totalScore-e.totalScore);return(e?t:t.slice(0,5)).map((e,n)=>{var t,a,s,o;let i,c=e.playerId===(null==A||null==(t=A.gameData)?void 0:t.myId),d=ee===e.playerId,p=(null==q?void 0:q.reportedUserId)&&e.playerId===q.reportedUserId;return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)("div",{className:"round-item round-animation ".concat(d?"active":""),style:{animationDelay:"".concat(.1*n,"s"),cursor:"pointer",...p&&{borderLeft:"3px solid #f44336"}},onClick:()=>{var n;ee===(n=e.playerId)?en(null):en(n)},children:(0,r.jsxs)("div",{className:"round-header",children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",flex:1},children:[(0,r.jsxs)("div",{style:{width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"8px"},children:[0===n&&(0,r.jsx)(u.SBv,{style:{color:"#FFD700",fontSize:"1.2rem",filter:"drop-shadow(0 2px 4px rgba(255, 215, 0, 0.3))"}}),1===n&&(0,r.jsx)(u.SBv,{style:{color:"#C0C0C0",fontSize:"1.1rem",filter:"drop-shadow(0 2px 4px rgba(192, 192, 192, 0.3))"}}),2===n&&(0,r.jsx)(u.SBv,{style:{color:"#CD7F32",fontSize:"1rem",filter:"drop-shadow(0 2px 4px rgba(205, 127, 50, 0.3))"}})]}),(0,r.jsxs)("span",{className:"round-number",style:p?{color:"#f44336",fontWeight:"bold"}:{},children:["#",n+1," ",e.username," ",c&&!(null==q?void 0:q.isModView)&&(0,r.jsxs)("span",{style:{color:"#888",fontStyle:"italic",marginLeft:"4px"},children:["(",V("you"),")"]}),p&&(0,r.jsx)("span",{style:{color:"#f44336",fontStyle:"italic",marginLeft:"4px"},children:"(reported)"})]})]}),(i=e.totalScore,(0,r.jsxs)("span",{className:"round-points",style:{color:"white"},children:[i," ",V("pts")]}))]})}),d&&((a=e.playerId)&&(null==(o=eM[0])||null==(s=o.players)?void 0:s[a])?(0,r.jsx)("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"8px"},children:eM.map((e,n)=>{var t;let l=null==(t=e.players)?void 0:t[a];if(!l)return null;let s=l.lat&&l.long?ek(e.lat,e.long,l.lat,l.long):null;return(0,r.jsxs)("div",{style:{padding:"8px 12px",backgroundColor:"rgba(255, 255, 255, 0.05)",marginBottom:"4px",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)("span",{style:{color:"white",fontSize:"0.9rem"},children:V("roundNo",{r:n+1})}),(0,r.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"center"},children:[s&&(0,r.jsx)("span",{style:{color:"#aaa",fontSize:"0.8rem"},children:eD(s)}),(0,r.jsxs)("span",{style:{color:"white",fontWeight:"bold"},children:[l.points||0," ",V("pts")]})]})]},n)})}):null)]},e.playerId)})},eL=e=>e>=3e3?"#4CAF50":e>=1500?"#FFC107":"#F44336",eS=function(e,n){let t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t=r?"http://maps.google.com/maps?q=&layer=c&panoid=".concat(r,"&cbp=11,0,0,0,0"):"http://maps.google.com/maps?q=&layer=c&cbll=".concat(e,",").concat(n,"&cbp=11,0,0,0,0"),window.inCrazyGames||void 0!==f?navigator.clipboard.writeText(t).then(()=>{g.oR.success(V("copiedToClipboard"))}).catch(()=>{let e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),g.oR.success(V("copiedToClipboard"))}):window.open(t,"_blank")},ez=(e,n)=>{if(n)return"#4CAF50";let t=["#F44336","#2196F3","#FF9800","#9C27B0","#00BCD4"];return t[Math.abs(e.split("").reduce((e,n)=>(e=(e<<5)-e+n.charCodeAt(0))&e,0))%t.length]};(0,l.useEffect)(()=>{$&&eM.length>0&&Q&&!el&&setTimeout(()=>{(()=>{if(!ep.current||!eM.length||!window.L)return;let e=ep.current,n=window.L.latLngBounds();eM.forEach(e=>{n.extend([e.lat,e.long]),e.guessLat&&e.guessLong&&n.extend([e.guessLat,e.guessLong]),e.players&&Object.values(e.players).forEach(e=>{e.lat&&e.long&&n.extend([e.lat,e.long])})});try{n.isValid()&&e.fitBounds(n,{padding:[20,20]})}catch(e){console.error("Error fitting map to bounds:",e)}})()},200)},[$,Q,el]);let eR=e=>{Z(e),window.innerWidth<=1024?X(!J):(e=>{if(!ep.current||!eM[e]||!window.L)return;let n=eM[e],t=ep.current;if(n.guessLat&&n.guessLong){let e=(e=>e<1?15:e<5?13:e<25?11:e<100?9:e<500?7:e<2e3?5:3)(ek(n.lat,n.long,n.guessLat,n.guessLong)),r=window.L.latLngBounds([[n.lat,n.long],[n.guessLat,n.guessLong]]);n.players&&Object.values(n.players).forEach(e=>{e.lat&&e.long&&r.extend([e.lat,e.long])}),t.flyToBounds(r,{padding:[50,50],maxZoom:e,duration:1.5,easeLinearity:.25})}else t.flyTo([n.lat,n.long],10,{duration:1.5,easeLinearity:.25})})(e)},eE=(0,l.useMemo)(()=>{var e;if(z&&z.length>0)return z;if(null==A||null==(e=A.gameData)?void 0:e.roundHistory){let{roundHistory:e,myId:n,duel:t,public:r}=A.gameData;if(t&&!r)return[];if(e&&e.length>0)return e.map((e,t)=>{let r=e.location,l=e.players[n];return{lat:r.lat,long:r.long,guessLat:null==l?void 0:l.lat,guessLong:null==l?void 0:l.long,points:(null==l?void 0:l.points)||0,players:e.players,timeTaken:null}})}return[]},[z,null==A||null==(n=A.gameData)?void 0:n.roundHistory,null==A||null==(t=A.gameData)?void 0:t.myId,null==A||null==(a=A.gameData)?void 0:a.duel,null==A||null==(s=A.gameData)?void 0:s.public]);if(!Q||!em.current||!eg.current||!eh.current)return(0,r.jsx)("div",{className:"game-summary-container",children:(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",color:"white",fontSize:"1.5rem"}})});if(!eE||0===eE.length)return(0,r.jsx)("div",{className:"round-over-screen ".concat(B?"hidden":""),children:(0,r.jsx)("div",{className:"game-summary-container",children:(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",color:"white",fontSize:"1.5rem",padding:"2rem",textAlign:"center"}})})});let eM=eE;if(U&&W){let{winner:e,draw:n,oldElo:t,newElo:a}=W,s=a-t,d=(()=>{var e,n,t;let r=null==A||null==(e=A.gameData)?void 0:e.myId;if((null==A||null==(t=A.gameData)||null==(n=t.roundHistory)?void 0:n.length)>0){let e=A.gameData.roundHistory[0];if(null==e?void 0:e.players){let n=Object.entries(e.players).filter(e=>{let[n]=e;return n!==r});if(n.length>0){let[e,t]=n[0];return{accountId:e,username:t.username}}}}if(eM.length>0){let e=eM[0];if(null==e?void 0:e.players){let n=Object.entries(e.players).filter(e=>{let[n]=e;return n!==r});if(n.length>0){let[e,t]=n[0];return{accountId:e,username:t.username}}}}return null})();return(0,r.jsxs)("div",{className:"round-over-screen ".concat(B?"hidden":""),children:[ed&&(0,r.jsx)(x,{isOpen:ei,onClose:()=>{ec(!1),eu(null)},reportedUser:ed,gameId:H,gameType:(null==A||null==(N=A.gameData)?void 0:N.public)?"unranked_multiplayer":"ranked_duel",session:_}),(0,r.jsxs)("div",{className:"game-summary-container",children:[(0,r.jsx)("div",{className:"game-summary-map",children:(0,r.jsxs)(y,{center:[0,0],zoom:2,minZoom:1,maxZoom:18,worldCopyJump:!1,zoomControl:window.innerWidth>1024,style:{height:"100%",width:"100%"},children:[(0,r.jsx)(b,{mapRef:ep,onMapReady:G,history:eM,onUserInteraction:()=>ea(!0)}),(0,r.jsx)(v,{url:"https://mt2.google.com/vt/lyrs=m&x={x}&y={y}&z={z}&hl=".concat(V("lang"))}),eM.map((e,n)=>{var t;let a=null==A||null==(t=A.gameData)?void 0:t.duel;return(0,r.jsxs)(l.Fragment,{children:[(!a||null===K||K===n)&&(0,r.jsx)(o.p,{position:[e.lat,e.long],icon:em.current,children:(0,r.jsx)(i.z,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:V("roundNo",{r:n+1})}),(0,r.jsx)("br",{}),V("actualLocation"),(0,r.jsx)("div",{style:{marginTop:"8px"},children:(0,r.jsxs)("button",{onClick:()=>eS(e.lat,e.long,e.panoId),style:{background:"#4285f4",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:["\uD83D\uDDFA️ ",V("openInMaps")]})})]})})}),e.guessLat&&e.guessLong&&(()=>{var t,l,a,s;return(null==A||null==(t=A.gameData)?void 0:t.duel)&&null!==K&&K!==n?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.p,{position:[e.guessLat,e.guessLong],icon:eg.current,children:(0,r.jsx)(i.z,{children:(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:(null==q?void 0:q.isModView)?(null==(s=e.players)||null==(l=s[null==A||null==(a=A.gameData)?void 0:a.myId])?void 0:l.username)||V("player"):V("yourGuess")}),(0,r.jsx)("br",{}),V("roundNo",{r:n+1}),(0,r.jsx)("br",{}),e.points," ",V("points")]})})}),(0,r.jsx)(c.R,{positions:[[e.lat,e.long],[e.guessLat,e.guessLong]],color:eL(e.points),weight:3,opacity:.7})]})})(),e.players&&Object.entries(e.players).map(t=>{var a,s;let[d,u]=t;if(u.lat&&u.long&&d!==(null==A||null==(a=A.gameData)?void 0:a.myId)){if(!(!(null==A||null==(s=A.gameData)?void 0:s.duel)||null===K||K===n))return null;ez(d,!1);let t=(null==q?void 0:q.reportedUserId)&&d===q.reportedUserId;return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(o.p,{position:[u.lat,u.long],icon:eh.current,children:(0,r.jsx)(i.z,{children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("strong",{style:{cursor:"default",textDecoration:"none",color:"inherit"},children:[u.username||V("opponent"),t&&" (reported)"]}),(0,r.jsx)("br",{}),V("roundNo",{r:n+1}),(0,r.jsx)("br",{}),u.points," ",V("points")]})})}),(0,r.jsx)(c.R,{positions:[[e.lat,e.long],[u.lat,u.long]],color:eL(u.points),weight:2,opacity:.5})]},"".concat(n,"-").concat(d))}return null})]},n)})]})}),(0,r.jsxs)("div",{className:"game-summary-sidebar ".concat(J?"mobile-expanded":""),children:[(0,r.jsxs)("div",{className:"summary-header duel-header ".concat(et&&window.innerWidth>1024?"compact":""),children:[(0,r.jsx)("h1",{className:"summary-title",children:n?V("draw"):e?V("victory"):V("defeat")}),"number"==typeof W.oldElo&&"number"==typeof W.newElo&&(0,r.jsxs)("div",{className:"elo-container",children:[(0,r.jsxs)("span",{className:"elo-title",children:[V("elo"),":"]}),(0,r.jsxs)("div",{className:"elo-display",children:[(0,r.jsx)("span",{className:"elo-value",children:ev}),(0,r.jsx)("span",{className:"elo-change",style:{color:s>=0?"green":"red"},children:s>0?"+".concat(s):s})]})]}),W.timeElapsed>0&&(0,r.jsxs)("div",{className:"time-elapsed",children:[(0,r.jsx)(u.w_X,{})," ",V("time"),": ",(0,p.A)(W.timeElapsed)]}),(0,r.jsxs)("div",{className:"summary-actions",children:[(0,r.jsx)("button",{className:"action-btn mobile-expand-btn",onClick:()=>X(!J),children:J?V("hideDetails"):V("viewDetails")}),O&&(0,r.jsx)("button",{className:"action-btn primary",onClick:F,children:O}),P&&(0,r.jsx)("button",{className:"action-btn secondary",onClick:T,children:P}),!(null==q?void 0:q.isModView)&&((null==A||null==(C=A.gameData)?void 0:C.public)===!1||(null==A||null==(k=A.gameData)?void 0:k.duel)&&(null==A||null==(D=A.gameData)?void 0:D.public)!==!0)&&d&&(null==_||null==(I=_.token)?void 0:I.secret)&&(0,r.jsxs)("button",{className:"action-btn report-btn",onClick:()=>{eu({accountId:d.accountId,username:d.username}),ec(!0)},style:{background:"rgba(255, 69, 58, 0.2)",border:"1px solid rgba(255, 69, 58, 0.4)",color:"white",display:"flex",alignItems:"center",gap:"6px",fontSize:"0.9rem"},title:"Report player",children:[(0,r.jsx)(u.O5k,{size:14}),"Report"]})]})]}),(0,r.jsxs)("div",{className:"rounds-container ".concat(J?"":"mobile-hidden"),ref:ex,children:[(null==A||null==(L=A.gameData)?void 0:L.duel)&&eM.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{style:{padding:"12px 20px",color:"white",marginBottom:"0",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:V("roundDetails")}),eM.map((e,n)=>{var t,l;let a=null==A||null==(t=A.gameData)?void 0:t.myId,s=null==(l=e.players)?void 0:l[a],o=Object.entries(e.players||{}).filter(e=>{let[n]=e;return n!==a}),i=o.length>0?o[0][0]:null,c=o.length>0?o[0][1]:null,d=(null==q?void 0:q.reportedUserId)&&i===q.reportedUserId,u=(null==s?void 0:s.points)||0,p=(null==c?void 0:c.points)||0,g=0,h=0;return u<p?g=p-u:p<u&&(h=u-p),(0,r.jsxs)("div",{className:"round-item round-animation ".concat(K===n?"active":""),style:{animationDelay:"".concat(.1*n,"s")},onClick:()=>eR(n),children:[(0,r.jsxs)("div",{className:"round-header",children:[(0,r.jsx)("span",{className:"round-number",children:V("roundNo",{r:n+1})}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.timeTaken&&((null==s?void 0:s.timeTaken)||e.timeTaken)>0&&(0,r.jsxs)("span",{className:"round-points",style:{color:"white"},children:["⏱️ ",(0,m.A)((null==s?void 0:s.timeTaken)||e.timeTaken)]}),window.innerWidth>1024&&e.lat&&e.long&&(0,r.jsx)("button",{className:"gmaps-icon",onClick:n=>{n.stopPropagation(),eS(e.lat,e.long,e.panoId)},style:{background:"none",border:"none",cursor:"pointer",fontSize:"12px",padding:"2px",borderRadius:"3px",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",transition:"background-color 0.2s"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(255, 255, 255, 0.2)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(255, 255, 255, 0.1)",title:V("openInMaps"),children:"\uD83D\uDCCD"})]})]}),(0,r.jsxs)("div",{className:"round-details",children:[(0,r.jsxs)("div",{className:"duel-round-details",style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[(0,r.jsxs)("div",{className:"player-score",style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[(0,r.jsx)("span",{className:"player-name",style:{fontSize:"0.9em",opacity:"0.8"},children:(null==q?void 0:q.isModView)?(null==s?void 0:s.username)||V("player1"):V("you")}),(0,r.jsxs)("span",{className:"score-points",style:{color:eL(u),fontWeight:"bold"},children:[u," ",V("pts")]}),g>0&&(0,r.jsxs)("span",{className:"health-damage",style:{color:"#ff6b6b",fontSize:"0.85em"},children:["-",g," ❤️"]})]}),!J&&(0,r.jsx)("div",{className:"vs-divider",style:{padding:"0 16px",fontWeight:"bold",color:"rgba(255, 255, 255, 0.6)",fontSize:"0.9em"},children:"VS"}),(0,r.jsxs)("div",{className:"player-score",style:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},children:[(0,r.jsxs)("span",{className:"player-name",style:{fontSize:"0.9em"},children:[(null==c?void 0:c.username)||V("opponent"),d&&" (reported)"]}),(0,r.jsxs)("span",{className:"score-points",style:{color:eL(p),fontWeight:"bold"},children:[p," ",V("pts")]}),h>0&&(0,r.jsxs)("span",{className:"health-damage",style:{color:"#ff6b6b",fontSize:"0.85em"},children:["-",h," ❤️"]})]})]}),(e.distance||e.timeTaken)&&(0,r.jsx)(r.Fragment,{children:e.distance&&e.distance>0&&(0,r.jsxs)("div",{className:"detail-row",children:[(0,r.jsxs)("span",{className:"detail-label",children:[(0,r.jsx)("span",{className:"detail-icon",children:"\uD83D\uDCCF"}),V("distance")]}),(0,r.jsx)("span",{className:"distance-value",children:eD(e.distance)})]})})]})]},n)})]}),(!(null==A||null==(S=A.gameData)?void 0:S.duel)||eM.length>0)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{children:V("finalScores")}),eI(!0)]})]})]})]})]})}return(0,r.jsx)("div",{className:"round-over-screen ".concat(B?"hidden":""),children:(0,r.jsxs)("div",{className:"game-summary-container ",children:[(0,r.jsx)("div",{className:"game-summary-map",children:(0,r.jsxs)(y,{center:[0,0],zoom:2,minZoom:1,maxZoom:18,worldCopyJump:!1,zoomControl:window.innerWidth>1024,style:{height:"100%",width:"100%"},children:[(0,r.jsx)(b,{mapRef:ep,onMapReady:G,history:z,onUserInteraction:()=>ea(!0)}),(0,r.jsx)(v,{url:"https://mt2.google.com/vt/lyrs=m&x={x}&y={y}&z={z}&hl=".concat(V("lang"))}),eM.map((e,n)=>{var t,a,s,d,u;let p=e.guessLat&&e.guessLong?ek(e.lat,e.long,e.guessLat,e.guessLong):null;return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(o.p,{position:[e.lat,e.long],icon:em.current,children:(0,r.jsx)(i.z,{className:"map-marker-popup",children:(0,r.jsxs)("div",{className:"popup-content",children:[(0,r.jsxs)("div",{className:"popup-round",children:[V("roundNumber",{number:n+1})," - ",V("actualLocation")]}),(!(null==A?void 0:A.gameData)||!(null==(t=eM[0])?void 0:t.players)||Object.keys(eM[0].players).length<=1)&&(0,r.jsxs)("div",{className:"popup-points",style:{color:eL(e.points)},children:[e.points," ",V("points")]}),p&&(!(null==A?void 0:A.gameData)||!(null==(a=eM[0])?void 0:a.players)||Object.keys(eM[0].players).length<=1)&&(0,r.jsxs)("div",{className:"popup-distance",children:[V("distance"),": ",eD(p)]}),(0,r.jsx)("div",{className:"popup-actions",children:(0,r.jsxs)("button",{className:"popup-btn gmaps",onClick:()=>eS(e.lat,e.long,e.panoId),children:["\uD83D\uDCCD ",V("openInMaps")]})})]})})}),e.guessLat&&e.guessLong&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.p,{position:[e.guessLat,e.guessLong],icon:eg.current,children:(0,r.jsx)(i.z,{className:"map-marker-popup",children:(0,r.jsxs)("div",{className:"popup-content",children:[(0,r.jsxs)("div",{className:"popup-round",children:[V("roundNumber",{number:n+1})," - ",(null==q?void 0:q.isModView)?(null==A||null==(u=A.gameData)||null==(d=u.players)||null==(s=d.find(e=>{var n;return e.id===(null==A||null==(n=A.gameData)?void 0:n.myId)}))?void 0:s.username)||V("player"):V("yourGuess")]}),(0,r.jsxs)("div",{className:"popup-points",style:{color:eL(e.points)},children:[e.points," ",V("points")]}),(0,r.jsxs)("div",{className:"popup-distance",children:[V("distance"),": ",eD(p)]})]})})}),(0,r.jsx)(c.R,{positions:[[e.lat,e.long],[e.guessLat,e.guessLong]],color:eL(e.points),weight:3,opacity:K===n?1:.6})]}),e.players&&Object.entries(e.players).map(t=>{var a,s;let[d,u]=t;if(u.lat&&u.long&&d!==(null==A||null==(a=A.gameData)?void 0:a.myId)){if(null==A||null==(s=A.gameData)?void 0:s.public){if(!ee||d!==ee)return null}else if(ee&&d!==ee)return null;ez(d,!1);let t=(null==q?void 0:q.reportedUserId)&&d===q.reportedUserId;return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)(o.p,{position:[u.lat,u.long],icon:eh.current,children:(0,r.jsx)(i.z,{children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("strong",{style:{cursor:"default",textDecoration:"none",color:"inherit"},children:[u.username||V("opponent"),t&&" (reported)"]}),(0,r.jsx)("br",{}),V("roundNo",{r:n+1}),(0,r.jsx)("br",{}),u.points," ",V("points")]})})}),(0,r.jsx)(c.R,{positions:[[e.lat,e.long],[u.lat,u.long]],color:eL(u.points),weight:2,opacity:.5})]},"".concat(n,"-").concat(d))}return null})]},n)})]})}),(0,r.jsxs)("div",{className:"game-summary-sidebar ".concat(J?"mobile-expanded":""),children:[(0,r.jsxs)("div",{className:"summary-header ".concat(et&&window.innerWidth>1024?"compact":""),style:{transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",...J&&window.innerWidth<=1024?{padding:"8px 16px",minHeight:"auto",transform:"scale(0.95)"}:{paddingTop:window.innerWidth<1024?"15px":"60px"}},children:[(0,r.jsx)("div",{className:"star-container",style:{transition:"all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)",...J&&window.innerWidth<=1024?{margin:"4px 0",transform:"scale(0.7) translateY(-4px)",opacity:.9}:{}},children:ej.map((e,n)=>(0,r.jsx)("div",{className:"star",style:{animationDelay:"".concat(.5*n,"s"),transition:"transform 0.3s ease-out"},children:"string"==typeof e&&e.endsWith(".png")?(0,r.jsx)("img",{src:e,alt:"Star ".concat(n),style:{width:"32px",height:"32px",transition:"all 0.3s ease-out"}}):(0,r.jsx)(u.gt3,{className:"star",style:{color:e,transition:"all 0.3s ease-out"}})},n))}),(null==A?void 0:A.gameData)&&!(null==A||null==(h=A.gameData)?void 0:h.duel)&&(null==(j=eM[0])?void 0:j.players)&&Object.keys(eM[0].players).length>1&&(()=>{let e=(()=>{var e;if(!eM.length||!(null==A||null==(e=A.gameData)?void 0:e.myId))return null;let n=new Map;eM.forEach(e=>{e.players&&Object.entries(e.players).forEach(e=>{let[t,r]=e;n.has(t)||n.set(t,r.username)})});let t=Array.from(n.entries()).map(e=>{let[n,t]=e;return{playerId:n,username:t,totalScore:eM.reduce((e,t)=>{var r,l;return e+((null==(l=t.players)||null==(r=l[n])?void 0:r.points)||0)},0)}}).sort((e,n)=>n.totalScore-e.totalScore),r=t.findIndex(e=>{var n;return e.playerId===(null==A||null==(n=A.gameData)?void 0:n.myId)});return -1!==r?{rank:r+1,total:t.length}:null})();return e&&(0,r.jsxs)("div",{style:{color:"white",fontSize:"1.2rem",fontWeight:"bold",textAlign:"center",margin:"8px 0",opacity:.9,transition:"all 0.3s ease-out",...J&&window.innerWidth<=1024?{fontSize:"1rem",margin:"4px 0",transform:"scale(0.9)"}:{}},children:[V("rank")," ",e.rank,"/",e.total]})})(),(0,r.jsx)("div",{className:"summary-score points-display ".concat(ef<R?"animating":""),style:{transition:"all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",...J&&window.innerWidth<=1024?{fontSize:"1.5rem",margin:"2px 0",transform:"scale(0.9) translateY(-2px)"}:{}},children:(null==ef?void 0:ef.toFixed(0))||R}),(0,r.jsxs)("div",{className:"summary-total",style:{transition:"all 0.3s ease-out",...J&&window.innerWidth<=1024?{fontSize:"0.8rem",margin:"2px 0",opacity:.8,transform:"translateY(-1px)"}:{}},children:[V("outOf")," ",M," ",V("points")]}),(0,r.jsxs)("div",{className:"summary-actions",children:[(0,r.jsx)("button",{className:"action-btn mobile-expand-btn",onClick:()=>X(!J),children:J?V("hideDetails"):V("viewDetails")}),O&&(0,r.jsx)("button",{className:"action-btn primary",onClick:F,children:O||"Play Again"}),P&&(0,r.jsx)("button",{className:"action-btn secondary",onClick:T,children:P||"Close"})]})]}),(0,r.jsxs)("div",{className:"rounds-container ".concat(J?"":"mobile-hidden"),ref:ex,children:[(null==A?void 0:A.gameData)&&(null==(w=eM[0])?void 0:w.players)&&Object.keys(eM[0].players).length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{style:{padding:"12px 20px",color:"white",marginBottom:"0",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:V("finalScores")}),eI(!0)]}),!(null==A?void 0:A.gameData)&&eM&&eM.length>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h3",{style:{padding:"12px 20px",color:"white",marginBottom:"0",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:V("roundDetails")}),eM.map((e,n)=>{let t=e.guessLat&&e.guessLong?ek(e.lat,e.long,e.guessLat,e.guessLong):null,l=window.innerWidth<=1024;return(0,r.jsxs)("div",{className:"round-item round-animation ".concat(K===n?"active":""),style:{animationDelay:"".concat(.1*n,"s")},onClick:()=>{eR(n)},children:[(0,r.jsxs)("div",{className:"round-header",children:[(0,r.jsx)("span",{className:"round-number",children:V("roundNo",{r:n+1})}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsxs)("span",{className:"round-points",style:{color:"white"},children:[e.points," ",V("pts")]}),!l&&(0,r.jsx)("button",{className:"gmaps-icon",onClick:n=>{n.stopPropagation(),eS(e.lat,e.long,e.panoId)},style:{background:"none",border:"none",cursor:"pointer",fontSize:"12px",padding:"2px",borderRadius:"3px",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",transition:"background-color 0.2s"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(255, 255, 255, 0.2)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(255, 255, 255, 0.1)",title:V("openInMaps"),children:"\uD83D\uDCCD"})]})]}),(0,r.jsxs)("div",{className:"round-details",children:[t&&t>0&&(0,r.jsxs)("div",{className:"detail-row",children:[(0,r.jsxs)("span",{className:"detail-label",children:[(0,r.jsx)("span",{className:"detail-icon",children:"\uD83D\uDCCF"}),V("distance")]}),(0,r.jsx)("span",{className:"distance-value",children:eD(t)})]}),e.timeTaken&&e.timeTaken>0&&(0,r.jsxs)("div",{className:"detail-row",children:[(0,r.jsxs)("span",{className:"detail-label",children:[(0,r.jsx)("span",{className:"detail-icon",children:"⏱️"}),V("timeTaken")]}),(0,r.jsx)("span",{className:"time-value",children:(0,m.A)(e.timeTaken)})]}),(()=>{var n;return(null==_||null==(n=_.token)?void 0:n.secret)&&e.xpEarned&&!(e.xpEarned<=0)?(0,r.jsxs)("div",{className:"detail-row",children:[(0,r.jsxs)("span",{className:"detail-label",children:[(0,r.jsx)("span",{className:"detail-icon",children:"⭐"}),"XP"]}),(0,r.jsxs)("span",{className:"xp-value",children:["+",e.xpEarned]})]}):null})()]})]},n)})]})]})]})]})})}},1567:(e,n,t)=>{"use strict";t.d(n,{x:()=>l});var r=t(4232);function l(e,n){let t=(0,r.useRef)();(0,r.useEffect)(function(){return null!=n&&e.instance.on(n),t.current=n,function(){null!=t.current&&e.instance.off(t.current),t.current=null}},[e,n])}},1782:()=>{},2349:(e,n,t)=>{"use strict";t.d(n,{B7:()=>s,KU:()=>i,jU:()=>o});var r=t(4232),l=t(8477),a=t(5073);function s(e){return(0,r.forwardRef)(function(n,t){let{instance:l,context:s}=e(n).current;return(0,r.useImperativeHandle)(t,()=>l),null==n.children?null:r.createElement(a.hL,{value:s},n.children)})}function o(e){return(0,r.forwardRef)(function(n,t){let[a,s]=(0,r.useState)(!1),{instance:o}=e(n,s).current;(0,r.useImperativeHandle)(t,()=>o),(0,r.useEffect)(function(){a&&o.update()},[o,a,n.children]);let i=o._contentNode;return i?(0,l.createPortal)(n.children,i):null})}function i(e){return(0,r.forwardRef)(function(n,t){let{instance:l}=e(n).current;return(0,r.useImperativeHandle)(t,()=>l),null})}},2526:(e,n,t)=>{"use strict";t.d(n,{K:()=>a,Q:()=>l});var r=t(4232);function l(e,n,t){return Object.freeze({instance:e,context:n,container:t})}function a(e,n){return null==n?function(n,t){let l=(0,r.useRef)();return l.current||(l.current=e(n,t)),l}:function(t,l){let a=(0,r.useRef)();a.current||(a.current=e(t,l));let s=(0,r.useRef)(t),{instance:o}=a.current;return(0,r.useEffect)(function(){s.current!==t&&(n(o,t,s.current),s.current=t)},[o,t,l]),a}}},3138:(e,n,t)=>{"use strict";t.d(n,{Po:()=>o,gY:()=>s,ko:()=>a});var r=t(5073),l=t(4232);function a(){return(0,r.U$)().map}function s(e,n){let t=a();return(0,l.useEffect)(function(){return t.on(e,n),function(){t.off(e,n)}},[t,e,n]),t}function o(e){let n=a();return(0,l.useEffect)(function(){return n.on(e),function(){n.off(e)}},[n,e]),n}},4986:(e,n,t)=>{"use strict";t.d(n,{T7:()=>p,Nq:()=>m,wk:()=>g,Lt:()=>h,X3:()=>x});var r=t(2349),l=t(723),a=t(2526),s=t(35),o=t(5947),i=t(5073),c=t(1567),d=t(8420),u=t(4232);function p(e){let n=(0,a.K)(function(n,t){return(0,a.Q)(e(n),t)}),t=(0,l.T)(n);return(0,r.KU)(t)}function m(e,n){let t=(0,a.K)(e,n),l=(0,s.V)(t);return(0,r.B7)(l)}function g(e,n){var t;let l=(t=(0,a.K)(e),function(e,r){let l=(0,i.U$)(),a=t((0,d.P)(e,l),l);return(0,o.z)(l.map,e.attribution),(0,c.x)(a.current,e.eventHandlers),n(a.current,l,e,r),a});return(0,r.jU)(l)}function h(e,n){var t;let l=(t=(0,a.K)(e,n),function(e){let n=(0,i.U$)(),r=t((0,d.P)(e,n),n);(0,c.x)(r.current,e.eventHandlers),(0,s.N)(r.current,n);var l=r.current;let a=(0,u.useRef)();return(0,u.useEffect)(function(){if(e.pathOptions!==a.current){let n=e.pathOptions??{};l.instance.setStyle(n),a.current=n}},[l,e]),r});return(0,r.B7)(l)}function x(e,n){let t=(0,a.K)(e,n),l=(0,s.V)(t);return(0,r.KU)(l)}},5073:(e,n,t)=>{"use strict";t.d(n,{U$:()=>i,W4:()=>a,fB:()=>l,hL:()=>o});var r=t(4232);function l(e){return Object.freeze({__version:1,map:e})}function a(e,n){return Object.freeze({...e,...n})}let s=(0,r.createContext)(null),o=s.Provider;function i(){let e=(0,r.useContext)(s);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}},5947:(e,n,t)=>{"use strict";t.d(n,{z:()=>l});var r=t(4232);function l(e,n){let t=(0,r.useRef)(n);(0,r.useEffect)(function(){n!==t.current&&null!=e.attributionControl&&(null!=t.current&&e.attributionControl.removeAttribution(t.current),null!=n&&e.attributionControl.addAttribution(n)),t.current=n},[e,n])}},6594:(e,n,t)=>{"use strict";t.d(n,{R:()=>o});var r=t(4986),l=t(2526),a=t(5073),s=t(2133);let o=(0,r.Lt)(function({positions:e,...n},t){let r=new s.Polyline(e,n);return(0,l.Q)(r,(0,a.W4)(t,{overlayContainer:r}))},function(e,n,t){n.positions!==t.positions&&e.setLatLngs(n.positions)})},7152:(e,n,t)=>{"use strict";t.d(n,{p:()=>o});var r=t(4986),l=t(2526),a=t(5073),s=t(2133);let o=(0,r.Nq)(function({position:e,...n},t){let r=new s.Marker(e,n);return(0,l.Q)(r,(0,a.W4)(t,{overlayContainer:r}))},function(e,n,t){n.position!==t.position&&e.setLatLng(n.position),null!=n.icon&&n.icon!==t.icon&&e.setIcon(n.icon),null!=n.zIndexOffset&&n.zIndexOffset!==t.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),null!=n.opacity&&n.opacity!==t.opacity&&e.setOpacity(n.opacity),null!=e.dragging&&n.draggable!==t.draggable&&(!0===n.draggable?e.dragging.enable():e.dragging.disable())})},8040:(e,n,t)=>{"use strict";t.d(n,{z:()=>o});var r=t(4986),l=t(2526),a=t(2133),s=t(4232);let o=(0,r.wk)(function(e,n){let t=new a.Popup(e,n.overlayContainer);return(0,l.Q)(t,n)},function(e,n,{position:t},r){(0,s.useEffect)(function(){let{instance:l}=e;function a(e){e.popup===l&&(l.update(),r(!0))}function s(e){e.popup===l&&r(!1)}return n.map.on({popupopen:a,popupclose:s}),null==n.overlayContainer?(null!=t&&l.setLatLng(t),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){n.map.off({popupopen:a,popupclose:s}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(l)}},[e,n,r,t])})},8420:(e,n,t)=>{"use strict";function r(e,n){let t=e.pane??n.pane;return t?{...e,pane:t}:e}t.d(n,{P:()=>r})}}]);