(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[890],{7623:(a,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>p});var s=n(7876),t=n(4232),r=n(7328),o=n(9099),l=n(7703),c=n(1213),i=n(1173),d=n(3603),m=n(6336);function p(a){var e;let{}=a,n=(0,o.useRouter)(),[p,u]=(0,t.useState)(0),[h,g]=(0,t.useState)([]),[_,x]=(0,t.useState)(l.iframe),{t:f}=(0,i.B)("common"),[j,w]=(0,t.useState)({});(0,t.useRef)(null),(0,t.useRef)(null),(0,t.useRef)([]),(0,t.useRef)(null);let[b,v]=(0,t.useState)(0);return(0,t.useEffect)(()=>{var a;let{apiUrl:e}=(0,d.A)(),s=new URLSearchParams(window.location.search),t=n.query.s||n.query.slug||s.get("s")||s.get("slug");console.log("also can be the format /map/slug");let r=window.location.pathname;r.startsWith("/map/")&&!t&&(t=r.split("/map/")[1]),t&&(console.log("fetching map data for",t,(0,m.dJ)()),fetch(e+"/api/map/publicData?slug=".concat(t),{headers:{authorization:null==(a=(0,m.dJ)())?void 0:a.authorization}}).then(async a=>{if(a.ok){let e=await a.json();console.log("fetched map data:",e),w(e.mapData)}else console.error("Failed to fetch map data:",a),404===a.status&&n.push("/404")}).catch(a=>{alert("An error occurred while fetching map data")}))},[]),(0,t.useEffect)(()=>{if(!j.data)return;let a=j.data.map(a=>"//www.google.com/maps/embed/v1/streetview?key=AIzaSyA2fHNuyc768n9ZJLTrfbkWLNK3sLOK-iQ&location=".concat(a.lat,",").concat(a.lng,"&fov=60"));g(a);let e=setInterval(()=>{x(l.iframe+" "+l.fadeOut),setTimeout(()=>{u(Math.floor(Math.random()*a.length)),x(l.iframe+" "+l.fadeIn)},1e3)},5e3);return window.intervalId=e,()=>clearInterval(e)},[j.data]),(0,s.jsxs)("div",{className:l.container,children:[(0,s.jsxs)(r,{children:[(0,s.jsx)("title",{children:(null==j?void 0:j.name)?"".concat(j.name," - WorldGuessr"):""}),(0,s.jsx)("meta",{name:"description",content:"Explore the world on WorldGuessr, a free GeoGuessr alternative. "}),(0,s.jsx)("link",{rel:"icon",type:"image/x-icon",href:"/icon.ico"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"})]}),(0,s.jsx)("style",{children:"\n          .mainBody {\n            user-select: auto !important;\n            overflow: auto !important;\n          }\n\n          .custom-marker {\n            background: none !important;\n            border: none !important;\n          }\n\n          .custom-marker div:hover {\n            transform: scale(1.2);\n          }\n\n          .marker-cluster {\n            background-color: rgba(255, 255, 255, 0.8);\n            border: 2px solid #4CAF50;\n            border-radius: 50%;\n            text-align: center;\n            font-size: 12px;\n            font-weight: bold;\n            line-height: 36px;\n            color: #333;\n            cursor: pointer;\n          }\n\n          .marker-cluster-small {\n            background-color: rgba(76, 175, 80, 0.8);\n            color: white;\n          }\n\n          .marker-cluster-medium {\n            background-color: rgba(255, 152, 0, 0.8);\n            color: white;\n          }\n\n          .marker-cluster-large {\n            background-color: rgba(244, 67, 54, 0.8);\n            color: white;\n          }\n\n          .marker-cluster div {\n            width: 36px;\n            height: 36px;\n            margin-left: 2px;\n            margin-top: 2px;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n        "}),(0,s.jsxs)("main",{className:l.main,children:[(0,s.jsx)(c.A,{}),(null==j?void 0:j.name)&&(0,s.jsxs)(s.Fragment,{children:[j.in_review&&(0,s.jsx)("div",{className:l.statusMessage,children:(0,s.jsx)("p",{children:"⏳ This map is currently under review."})}),j.reject_reason&&(0,s.jsx)("div",{className:l.statusMessage,children:(0,s.jsxs)("p",{children:["❌ This map has been rejected: ",j.reject_reason]})})]}),(0,s.jsxs)("div",{className:l.branding,children:[(0,s.jsx)("h1",{children:"WorldGuessr"}),(0,s.jsx)("center",{children:(0,s.jsxs)("button",{onClick:()=>window.location.href="/".concat(window.location.search.includes("crazygames")?"?crazygames=true":""),className:l.backButton,children:["← ",f("backToGame")]})})]}),j.name&&(0,s.jsxs)("div",{className:l.mapHeader,children:[(0,s.jsxs)("div",{className:l.mapImage,children:[h.length>0&&(0,s.jsx)("div",{className:l.iframeContainer,children:(0,s.jsx)("iframe",{className:_,loading:"lazy",allowFullScreen:!0,referrerPolicy:"no-referrer-when-downgrade",src:h[p]})}),j.countryCode&&(0,s.jsx)("img",{src:"https://flagcdn.com/w2560/".concat(null==(e=j.countryCode)?void 0:e.toLowerCase(),".png"),style:{width:"100%",height:"100%",objectFit:"cover"}})]}),(0,s.jsxs)("div",{className:l.mapInfo,children:[(0,s.jsx)("h1",{children:j.name}),(0,s.jsx)("p",{children:j.description_short})]})]}),(null==j?void 0:j.name)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:l.playButton,onClick:()=>{window.location.href="/?map=".concat(j.countryCode||j.slug).concat(window.location.search.includes("crazygames")?"&crazygames=true":"")},children:"PLAY"}),(0,s.jsxs)("div",{className:l.mapStats,children:[void 0!==j.plays&&(0,s.jsxs)("div",{className:l.stat,children:[(0,s.jsx)("span",{className:l.statIcon,children:"\uD83D\uDC65"}),(0,s.jsx)("span",{className:l.statValue,children:j.plays.toLocaleString()}),(0,s.jsx)("span",{className:l.statLabel,children:"Plays"})]}),j.data&&(0,s.jsxs)("div",{className:l.stat,children:[(0,s.jsx)("span",{className:l.statIcon,children:"\uD83D\uDCCD"}),(0,s.jsx)("span",{className:l.statValue,children:j.locationcnt.toLocaleString()}),(0,s.jsx)("span",{className:l.statLabel,children:"Locations"})]}),void 0!==j.hearts&&(0,s.jsxs)("div",{className:l.stat,children:[(0,s.jsx)("span",{className:l.statIcon,children:"❤️"}),(0,s.jsx)("span",{className:l.statValue,children:j.hearts.toLocaleString()}),(0,s.jsx)("span",{className:l.statLabel,children:"Hearts"})]})]}),(0,s.jsxs)("div",{className:l.mapDescription,children:[(0,s.jsx)("h2",{children:"About this map"}),j.description_long.split("\n").map((a,e)=>(0,s.jsx)("p",{children:a},e)),(0,s.jsxs)("p",{className:l.mapAuthor,children:["Created by ",(0,s.jsx)("strong",{children:j.created_by}),j.created_at&&" ".concat(j.created_at," ago")]})]})]})]})]})}n(2446)},7703:a=>{a.exports={container:"MapPage_container__xYWXo",main:"MapPage_main__9rDnn",branding:"MapPage_branding__HuPlP",backButton:"MapPage_backButton__hUtxm",statusMessage:"MapPage_statusMessage__gBAeq",mapHeader:"MapPage_mapHeader__3oQ9O",mapImage:"MapPage_mapImage__enP0P",iframeContainer:"MapPage_iframeContainer__qN9dy",iframe:"MapPage_iframe__EmsgL",fadeOut:"MapPage_fadeOut__I3Vau",fadeIn:"MapPage_fadeIn__4GKks",mapInfo:"MapPage_mapInfo__GI_qE",playButton:"MapPage_playButton__A22gH",worldMapSection:"MapPage_worldMapSection__PwwOU",worldMapContainer:"MapPage_worldMapContainer__xaRiW",mapStats:"MapPage_mapStats__q55sE",stat:"MapPage_stat__sxArn",statIcon:"MapPage_statIcon__KuDGT",statValue:"MapPage_statValue__F1uP_",statLabel:"MapPage_statLabel__9e1yA",mapDescription:"MapPage_mapDescription__ymrug",mapAuthor:"MapPage_mapAuthor__oups6",pageSlideIn:"MapPage_pageSlideIn__42_WF"}},8032:(a,e,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/map",function(){return n(7623)}])}},a=>{a.O(0,[938,585,535,833,173,55,636,593,792],()=>a(a.s=8032)),_N_E=a.O()}]);