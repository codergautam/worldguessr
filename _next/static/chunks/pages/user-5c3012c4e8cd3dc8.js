(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{2144:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return r(9422)}])},9422:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>f});var o=r(7876),s=r(4250),n=r(4232),i=r(7328),t=r(9099),c=r(1213),l=r(62),d=r(9262),b=r(1173),p=r(4279);function x(e){let{profileData:a,eloData:r}=e,{t:i}=(0,b.B)("common"),[t,c]=(0,n.useState)("profile"),x=[{key:"profile",label:i("profile"),icon:"\uD83D\uDC64"},{key:"elo",label:i("ELO"),icon:"\uD83C\uDFC6"}];return(0,o.jsxs)("div",{className:"jsx-a49ba2c20bb2efa7 public-profile-container",children:[(0,o.jsxs)("div",{className:"jsx-a49ba2c20bb2efa7 public-profile-content",children:[(0,o.jsx)("div",{className:"jsx-a49ba2c20bb2efa7 public-profile-header",children:(0,o.jsxs)("h1",{style:{display:"flex",alignItems:"center",gap:"10px",flexWrap:"wrap"},className:"jsx-a49ba2c20bb2efa7",children:[null==a?void 0:a.username,(null==a?void 0:a.countryCode)&&(0,o.jsx)(p.A,{countryCode:a.countryCode,style:{fontSize:"0.9em"}}),(null==a?void 0:a.supporter)&&(0,o.jsx)("span",{style:{marginLeft:"15px",color:"black",fontSize:"0.7rem",background:"linear-gradient(135deg, #ffd700, #ffed4e)",padding:"4px 12px",borderRadius:"15px",fontWeight:"bold",textShadow:"none"},className:"jsx-a49ba2c20bb2efa7",children:"SUPPORTER"})]})}),(0,o.jsx)("nav",{className:"jsx-a49ba2c20bb2efa7 public-profile-nav",children:x.map(e=>(0,o.jsxs)("button",{onClick:()=>c(e.key),className:"jsx-a49ba2c20bb2efa7 "+"public-profile-nav-item ".concat(t===e.key?"active":""),children:[(0,o.jsx)("span",{className:"jsx-a49ba2c20bb2efa7 nav-icon",children:e.icon}),(0,o.jsx)("span",{className:"jsx-a49ba2c20bb2efa7 nav-label",children:e.label})]},e.key))}),(0,o.jsx)("div",{className:"jsx-a49ba2c20bb2efa7 public-profile-body",children:(()=>{switch(t){case"profile":return(0,o.jsx)("div",{className:"profile-content",children:(0,o.jsx)(l.A,{accountData:a,supporter:null==a?void 0:a.supporter,eloData:r,session:null,isPublic:!0,username:null==a?void 0:a.username,viewingPublicProfile:!0})});case"elo":return(0,o.jsx)("div",{className:"elo-content",children:(0,o.jsx)(d.A,{eloData:r,session:null,isPublic:!0,username:null==a?void 0:a.username,viewingPublicProfile:!0})});default:return null}})()})]}),(0,o.jsx)(s,{id:"a49ba2c20bb2efa7",children:'.public-profile-container.jsx-a49ba2c20bb2efa7{width:100%;padding:0;box-sizing:border-box;font-family:"Lexend",sans-serif}.public-profile-content.jsx-a49ba2c20bb2efa7{max-width:1200px;margin:0 auto;background:rgba(255,255,255,.05);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:20px;border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px rgba(0,0,0,.3);overflow:hidden;font-family:"Lexend",sans-serif}.public-profile-header.jsx-a49ba2c20bb2efa7{background:rgba(0,0,0,.2);padding:30px;border-bottom:1px solid rgba(255,255,255,.1)}.public-profile-header.jsx-a49ba2c20bb2efa7 h1.jsx-a49ba2c20bb2efa7{margin:0;font-size:clamp(28px,5vw,48px);font-weight:bold;color:white;text-shadow:0 2px 4px rgba(0,0,0,.3);display:flex;align-items:center;justify-content:center;font-family:"Lexend",sans-serif}.public-profile-nav.jsx-a49ba2c20bb2efa7{display:flex;gap:10px;padding:20px;background:rgba(0,0,0,.1);overflow-x:auto;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.3)transparent}.public-profile-nav.jsx-a49ba2c20bb2efa7::-webkit-scrollbar{height:6px}.public-profile-nav.jsx-a49ba2c20bb2efa7::-webkit-scrollbar-thumb{background:rgba(255,255,255,.3);border-radius:3px}.public-profile-nav-item.jsx-a49ba2c20bb2efa7{display:flex;align-items:center;gap:8px;padding:12px 24px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.2);border-radius:12px;color:white;font-size:16px;font-weight:500;cursor:pointer;transition:all.3s ease;white-space:nowrap;font-family:"Lexend",sans-serif;text-shadow:0 1px 2px rgba(0,0,0,.3)}.public-profile-nav-item.jsx-a49ba2c20bb2efa7:hover{background:rgba(255,255,255,.1);transform:translatey(-2px);border-color:rgba(255,255,255,.3)}.public-profile-nav-item.active.jsx-a49ba2c20bb2efa7{background:var(--gradGreenBtn);border-color:rgba(255,255,255,.3);filter:drop-shadow(0px 4px 6px rgba(0,0,0,.3))}.nav-icon.jsx-a49ba2c20bb2efa7{font-size:20px}.nav-label.jsx-a49ba2c20bb2efa7{font-size:14px}.public-profile-body.jsx-a49ba2c20bb2efa7{padding:30px;max-height:calc(100vh - 300px);overflow-y:auto;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.3)transparent;font-family:"Lexend",sans-serif}.public-profile-body.jsx-a49ba2c20bb2efa7::-webkit-scrollbar{width:8px}.public-profile-body.jsx-a49ba2c20bb2efa7::-webkit-scrollbar-thumb{background:rgba(255,255,255,.3);border-radius:4px}.profile-content.jsx-a49ba2c20bb2efa7,.elo-content.jsx-a49ba2c20bb2efa7{animation:fadeIn.3s ease}@keyframes fadeIn{from{opacity:0;transform:translatey(10px)}to{opacity:1;transform:translatey(0)}}@media(max-width:768px){.public-profile-container.jsx-a49ba2c20bb2efa7{padding:10px}.public-profile-header.jsx-a49ba2c20bb2efa7{padding:20px}.public-profile-nav.jsx-a49ba2c20bb2efa7{padding:15px}.public-profile-body.jsx-a49ba2c20bb2efa7{padding:20px;max-height:calc(100vh - 250px)}.nav-label.jsx-a49ba2c20bb2efa7{display:none}.public-profile-nav-item.jsx-a49ba2c20bb2efa7{padding:12px}.nav-icon.jsx-a49ba2c20bb2efa7{font-size:24px}}@media(max-width:480px){.public-profile-body.jsx-a49ba2c20bb2efa7{padding:15px}}'})]})}var u=r(3603);function f(){let e=(0,t.useRouter)(),{t:a}=(0,b.B)("common"),[r,l]=(0,n.useState)(null),[d,p]=(0,n.useState)(null),[f,g]=(0,n.useState)(null),[m,h]=(0,n.useState)(!0),[j,w]=(0,n.useState)(null),y=(0,n.useCallback)(async e=>{h(!0),w(null);let{apiUrl:a}=(0,u.A)();try{var r,o,s,n,i,t,c,l;let d,b,x,u,f=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return Promise.race([fetch(e),new Promise((e,r)=>setTimeout(()=>r(Error("Request timeout")),a))])};try{[d,b]=await Promise.all([f("".concat(a,"/api/publicProfile?username=").concat(encodeURIComponent(e))),f("".concat(a,"/api/eloRank?username=").concat(encodeURIComponent(e)))])}catch(e){"Request timeout"===e.message?w("Request timed out. Please check your connection and try again."):"TypeError"===e.name&&e.message.includes("fetch")?w("Network error. Please check your internet connection."):w("Failed to connect to server. Please try again later."),h(!1);return}if(!d.ok){let e="Failed to load profile";try{if(404===d.status)e="User not found";else if(429===d.status){let a=d.headers.get("Retry-After");e=a?"Too many requests. Please try again in ".concat(a," seconds."):"Too many requests. Please try again later."}else e=400===d.status?(await d.json().catch(()=>({}))).message||"Invalid username format":500===d.status||d.status>=500?"Server error. Please try again later.":"Failed to load profile (".concat(d.status,")")}catch(a){console.error("Error parsing error response:",a),e="Failed to load profile (".concat(d.status,")")}w(e),h(!1);return}try{x=await d.json()}catch(e){console.error("Error parsing profile response:",e),w("Invalid response from server. Please try again."),h(!1);return}if(!x||"object"!=typeof x){w("Invalid profile data received. Please try again."),h(!1);return}if(b.ok)try{u=await b.json()}catch(e){console.warn("Error parsing ELO response, using fallback:",e),u={elo:x.elo||1e3,rank:x.rank||0,duels_wins:(null==(i=x.duelStats)?void 0:i.wins)||0,duels_losses:(null==(t=x.duelStats)?void 0:t.losses)||0,duels_tied:(null==(c=x.duelStats)?void 0:c.ties)||0,win_rate:(null==(l=x.duelStats)?void 0:l.winRate)||0}}else console.warn("Failed to fetch ELO data:",b.status),u={elo:x.elo||1e3,rank:x.rank||0,duels_wins:(null==(r=x.duelStats)?void 0:r.wins)||0,duels_losses:(null==(o=x.duelStats)?void 0:o.losses)||0,duels_tied:(null==(s=x.duelStats)?void 0:s.ties)||0,win_rate:(null==(n=x.duelStats)?void 0:n.winRate)||0};p(x),g(u),h(!1)}catch(e){console.error("Unexpected error fetching public profile:",e),"TypeError"===e.name?w("Network error. Please check your connection."):e.message&&e.message.includes("timeout")?w("Request timed out. Please try again."):w("An unexpected error occurred. Please try again later."),h(!1)}},[]);return(0,n.useEffect)(()=>{let{apiUrl:a}=(0,u.A)(),r=e.query.u;if(r||(r=new URLSearchParams(window.location.search).get("u")),!r){h(!1),w("No username provided. Use format: /user?u=username");return}l(r),y(r)},[e.query.u,y]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i,{children:[(0,o.jsx)("title",{className:"jsx-cc01d05ee81a8ea3",children:r?"".concat(r,"'s Profile - WorldGuessr"):"User Profile - WorldGuessr"}),(0,o.jsx)("meta",{name:"description",content:r?"View ".concat(r,"'s WorldGuessr profile stats, ELO rating, and achievements."):"View user profile on WorldGuessr",className:"jsx-cc01d05ee81a8ea3"})]}),(0,o.jsx)(c.A,{}),(0,o.jsxs)("div",{className:"jsx-cc01d05ee81a8ea3 user-profile-page",children:[m&&(0,o.jsx)("div",{className:"jsx-cc01d05ee81a8ea3 loading-container",children:(0,o.jsxs)("div",{className:"jsx-cc01d05ee81a8ea3 loading-card",children:[(0,o.jsx)("div",{className:"jsx-cc01d05ee81a8ea3 loading-spinner"}),(0,o.jsx)("p",{className:"jsx-cc01d05ee81a8ea3",children:"Loading profile..."})]})}),j&&(0,o.jsx)("div",{className:"jsx-cc01d05ee81a8ea3 error-container",children:(0,o.jsxs)("div",{className:"jsx-cc01d05ee81a8ea3 error-card",children:[(0,o.jsxs)("h2",{className:"jsx-cc01d05ee81a8ea3",children:["⚠️ ",j]}),(0,o.jsx)("p",{className:"jsx-cc01d05ee81a8ea3",children:"The user profile could not be loaded."}),(0,o.jsxs)("div",{className:"jsx-cc01d05ee81a8ea3 error-actions",children:[(0,o.jsx)("button",{onClick:()=>{let a=e.query.u||new URLSearchParams(window.location.search).get("u");a?y(a):w("No username provided")},className:"jsx-cc01d05ee81a8ea3 retry-button",children:"Retry"}),(0,o.jsx)("button",{onClick:()=>e.push("/"),className:"jsx-cc01d05ee81a8ea3 home-button",children:"Go Home"})]})]})}),!m&&!j&&d&&f&&(0,o.jsx)(x,{profileData:d,eloData:f})]}),(0,o.jsx)(s,{id:"cc01d05ee81a8ea3",children:'.user-profile-page.jsx-cc01d05ee81a8ea3{min-height:100vh;width:100%;max-width:100vw;background:linear-gradient(135deg,rgba(0,0,0,.9)0%,rgba(20,26,57,.8)50%,rgba(0,0,0,.9)100%),url("/street2.webp");background-size:cover;background-position:center;background-attachment:fixed;color:#fff;display:flex;flex-direction:column;position:relative;overflow-x:hidden;overflow-y:auto!important;padding:20px;box-sizing:border-box;font-family:"Lexend",sans-serif}.loading-container.jsx-cc01d05ee81a8ea3{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100vh - 120px);padding:20px}.loading-card.jsx-cc01d05ee81a8ea3{background:rgba(255,255,255,.05);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:60px 40px;text-align:center;color:white;box-shadow:0 8px 32px rgba(0,0,0,.3);max-width:400px}.loading-spinner.jsx-cc01d05ee81a8ea3{border:4px solid rgba(255,255,255,.2);border-radius:50%;border-top:4px solid rgba(255,255,255,.9);width:60px;height:60px;animation:spin 1s linear infinite;margin:0 auto 20px auto}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.loading-card.jsx-cc01d05ee81a8ea3 p.jsx-cc01d05ee81a8ea3{font-size:18px;font-weight:500;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.3);font-family:"Lexend",sans-serif}.error-container.jsx-cc01d05ee81a8ea3{display:flex;align-items:center;justify-content:center;min-height:calc(100vh - 120px);padding:20px}.error-card.jsx-cc01d05ee81a8ea3{background:rgba(255,255,255,.05);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);border-radius:20px;padding:40px;max-width:500px;text-align:center;color:white;box-shadow:0 8px 32px rgba(0,0,0,.3);width:100%}.error-card.jsx-cc01d05ee81a8ea3 h2.jsx-cc01d05ee81a8ea3{margin:0 0 15px 0;font-size:clamp(24px,5vw,32px);color:#ffc107;text-shadow:0 2px 4px rgba(0,0,0,.3);font-family:"Lexend",sans-serif}.error-card.jsx-cc01d05ee81a8ea3 p.jsx-cc01d05ee81a8ea3{margin:0 0 25px 0;font-size:16px;color:rgba(255,255,255,.9);text-shadow:0 1px 2px rgba(0,0,0,.3);font-family:"Lexend",sans-serif}.error-actions.jsx-cc01d05ee81a8ea3{display:flex;gap:15px;justify-content:center;flex-wrap:wrap}.error-card.jsx-cc01d05ee81a8ea3 button.jsx-cc01d05ee81a8ea3{padding:12px 24px;border:2px solid rgba(255,255,255,.2);border-radius:25px;background:rgba(255,255,255,.1);color:white;font-size:14px;font-weight:500;cursor:pointer;transition:all.3s ease;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);font-family:"Lexend",sans-serif}.error-card.jsx-cc01d05ee81a8ea3 button.retry-button.jsx-cc01d05ee81a8ea3{background:rgba(0,123,255,.2);border-color:rgba(0,123,255,.3);color:#4dabf7}.error-card.jsx-cc01d05ee81a8ea3 button.retry-button.jsx-cc01d05ee81a8ea3:hover{background:rgba(0,123,255,.3);color:white;transform:translatey(-2px);box-shadow:0 4px 15px rgba(0,123,255,.3);border-color:rgba(0,123,255,.4)}.error-card.jsx-cc01d05ee81a8ea3 button.home-button.jsx-cc01d05ee81a8ea3{background:rgba(76,175,80,.2);border-color:rgba(76,175,80,.3);color:#4CAF50}.error-card.jsx-cc01d05ee81a8ea3 button.home-button.jsx-cc01d05ee81a8ea3:hover{background:rgba(76,175,80,.3);color:white;transform:translatey(-2px);box-shadow:0 4px 15px rgba(76,175,80,.3);border-color:rgba(76,175,80,.4)}.error-card.jsx-cc01d05ee81a8ea3 button.jsx-cc01d05ee81a8ea3:active{transform:translatey(0)}@media(max-width:768px){.user-profile-page.jsx-cc01d05ee81a8ea3{padding:15px}.back-button-container.jsx-cc01d05ee81a8ea3{padding:0;margin-bottom:15px}.back-to-wg-button.jsx-cc01d05ee81a8ea3{width:100%;padding:10px 20px;font-size:14px}.error-card.jsx-cc01d05ee81a8ea3{padding:30px 20px}.error-card.jsx-cc01d05ee81a8ea3 button.jsx-cc01d05ee81a8ea3{padding:10px 20px;font-size:14px}.loading-card.jsx-cc01d05ee81a8ea3{padding:40px 30px}}'})]})}}},e=>{e.O(0,[938,585,697,535,329,107,766,173,55,973,636,593,792],()=>e(e.s=2144)),_N_E=e.O()}]);