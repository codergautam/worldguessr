(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{2144:(a,e,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return r(9422)}])},9422:(a,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>u});var s=r(7876),o=r(4250),t=r(4232),c=r(7328),n=r(9099),d=r(1213),i=r(1079),l=r(9262),b=r(1173);function p(a){let{profileData:e,eloData:r}=a,{t:c}=(0,b.B)("common"),[n,d]=(0,t.useState)("profile"),p=[{key:"profile",label:c("profile"),icon:"\uD83D\uDC64"},{key:"elo",label:c("ELO"),icon:"\uD83C\uDFC6"}];return(0,s.jsxs)("div",{className:"jsx-c35abcbd9ee10fd7 public-profile-container",children:[(0,s.jsxs)("div",{className:"jsx-c35abcbd9ee10fd7 public-profile-content",children:[(0,s.jsx)("div",{className:"jsx-c35abcbd9ee10fd7 public-profile-header",children:(0,s.jsxs)("h1",{className:"jsx-c35abcbd9ee10fd7",children:[null==e?void 0:e.username,(null==e?void 0:e.supporter)&&(0,s.jsx)("span",{style:{marginLeft:"15px",color:"black",fontSize:"0.7rem",background:"linear-gradient(135deg, #ffd700, #ffed4e)",padding:"4px 12px",borderRadius:"15px",fontWeight:"bold",textShadow:"none"},className:"jsx-c35abcbd9ee10fd7",children:"SUPPORTER"})]})}),(0,s.jsx)("nav",{className:"jsx-c35abcbd9ee10fd7 public-profile-nav",children:p.map(a=>(0,s.jsxs)("button",{onClick:()=>d(a.key),className:"jsx-c35abcbd9ee10fd7 "+"public-profile-nav-item ".concat(n===a.key?"active":""),children:[(0,s.jsx)("span",{className:"jsx-c35abcbd9ee10fd7 nav-icon",children:a.icon}),(0,s.jsx)("span",{className:"jsx-c35abcbd9ee10fd7 nav-label",children:a.label})]},a.key))}),(0,s.jsx)("div",{className:"jsx-c35abcbd9ee10fd7 public-profile-body",children:(()=>{switch(n){case"profile":return(0,s.jsx)("div",{className:"profile-content",children:(0,s.jsx)(i.A,{accountData:e,supporter:null==e?void 0:e.supporter,eloData:r,session:null,isPublic:!0,username:null==e?void 0:e.username})});case"elo":return(0,s.jsx)("div",{className:"elo-content",children:(0,s.jsx)(l.A,{eloData:r,session:null,isPublic:!0,username:null==e?void 0:e.username})});default:return null}})()})]}),(0,s.jsx)(o,{id:"c35abcbd9ee10fd7",children:'.public-profile-container.jsx-c35abcbd9ee10fd7{width:100%;padding:0;box-sizing:border-box;font-family:"Lexend",sans-serif}.public-profile-content.jsx-c35abcbd9ee10fd7{max-width:1200px;margin:0 auto;background:var(--gradLight);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:20px;border:1px solid rgba(255,255,255,.2);filter:drop-shadow(0px 6px 7px rgba(0,0,0,.3));overflow:hidden;font-family:"Lexend",sans-serif}.public-profile-header.jsx-c35abcbd9ee10fd7{background:rgba(0,0,0,.2);padding:30px;border-bottom:1px solid rgba(255,255,255,.1)}.public-profile-header.jsx-c35abcbd9ee10fd7 h1.jsx-c35abcbd9ee10fd7{margin:0;font-size:clamp(28px,5vw,48px);font-weight:bold;color:white;text-shadow:0 2px 4px rgba(0,0,0,.3);display:flex;align-items:center;justify-content:center;font-family:"Lexend",sans-serif}.public-profile-nav.jsx-c35abcbd9ee10fd7{display:flex;gap:10px;padding:20px;background:rgba(0,0,0,.1);overflow-x:auto;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.3)transparent}.public-profile-nav.jsx-c35abcbd9ee10fd7::-webkit-scrollbar{height:6px}.public-profile-nav.jsx-c35abcbd9ee10fd7::-webkit-scrollbar-thumb{background:rgba(255,255,255,.3);border-radius:3px}.public-profile-nav-item.jsx-c35abcbd9ee10fd7{display:flex;align-items:center;gap:8px;padding:12px 24px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.2);border-radius:12px;color:white;font-size:16px;font-weight:500;cursor:pointer;transition:all.3s ease;white-space:nowrap;font-family:"Lexend",sans-serif;text-shadow:0 1px 2px rgba(0,0,0,.3)}.public-profile-nav-item.jsx-c35abcbd9ee10fd7:hover{background:rgba(255,255,255,.1);transform:translatey(-2px);border-color:rgba(255,255,255,.3)}.public-profile-nav-item.active.jsx-c35abcbd9ee10fd7{background:var(--gradGreenBtn);border-color:rgba(255,255,255,.3);filter:drop-shadow(0px 4px 6px rgba(0,0,0,.3))}.nav-icon.jsx-c35abcbd9ee10fd7{font-size:20px}.nav-label.jsx-c35abcbd9ee10fd7{font-size:14px}.public-profile-body.jsx-c35abcbd9ee10fd7{padding:30px;max-height:calc(100vh - 300px);overflow-y:auto;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.3)transparent;font-family:"Lexend",sans-serif}.public-profile-body.jsx-c35abcbd9ee10fd7::-webkit-scrollbar{width:8px}.public-profile-body.jsx-c35abcbd9ee10fd7::-webkit-scrollbar-thumb{background:rgba(255,255,255,.3);border-radius:4px}.profile-content.jsx-c35abcbd9ee10fd7,.elo-content.jsx-c35abcbd9ee10fd7{animation:fadeIn.3s ease}@keyframes fadeIn{from{opacity:0;transform:translatey(10px)}to{opacity:1;transform:translatey(0)}}@media(max-width:768px){.public-profile-container.jsx-c35abcbd9ee10fd7{padding:10px}.public-profile-header.jsx-c35abcbd9ee10fd7{padding:20px}.public-profile-nav.jsx-c35abcbd9ee10fd7{padding:15px}.public-profile-body.jsx-c35abcbd9ee10fd7{padding:20px;max-height:calc(100vh - 250px)}.nav-label.jsx-c35abcbd9ee10fd7{display:none}.public-profile-nav-item.jsx-c35abcbd9ee10fd7{padding:12px}.nav-icon.jsx-c35abcbd9ee10fd7{font-size:24px}}@media(max-width:480px){.public-profile-body.jsx-c35abcbd9ee10fd7{padding:15px}}'})]})}var x=r(3603);function u(){let a=(0,n.useRouter)(),{t:e}=(0,b.B)("common"),[r,i]=(0,t.useState)(null),[l,u]=(0,t.useState)(null),[f,g]=(0,t.useState)(null),[h,m]=(0,t.useState)(!0),[j,w]=(0,t.useState)(null),v=(0,t.useCallback)(async a=>{m(!0),w(null);let{apiUrl:e}=(0,x.A)();try{var r,s,o,t,c,n,d,i;let l,b,p,x,f=function(a){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return Promise.race([fetch(a),new Promise((a,r)=>setTimeout(()=>r(Error("Request timeout")),e))])};try{[l,b]=await Promise.all([f("".concat(e,"/api/publicProfile?username=").concat(encodeURIComponent(a))),f("".concat(e,"/api/eloRank?username=").concat(encodeURIComponent(a)))])}catch(a){"Request timeout"===a.message?w("Request timed out. Please check your connection and try again."):"TypeError"===a.name&&a.message.includes("fetch")?w("Network error. Please check your internet connection."):w("Failed to connect to server. Please try again later."),m(!1);return}if(!l.ok){let a="Failed to load profile";try{if(404===l.status)a="User not found";else if(429===l.status){let e=l.headers.get("Retry-After");a=e?"Too many requests. Please try again in ".concat(e," seconds."):"Too many requests. Please try again later."}else a=400===l.status?(await l.json().catch(()=>({}))).message||"Invalid username format":500===l.status||l.status>=500?"Server error. Please try again later.":"Failed to load profile (".concat(l.status,")")}catch(e){console.error("Error parsing error response:",e),a="Failed to load profile (".concat(l.status,")")}w(a),m(!1);return}try{p=await l.json()}catch(a){console.error("Error parsing profile response:",a),w("Invalid response from server. Please try again."),m(!1);return}if(!p||"object"!=typeof p){w("Invalid profile data received. Please try again."),m(!1);return}if(b.ok)try{x=await b.json()}catch(a){console.warn("Error parsing ELO response, using fallback:",a),x={elo:p.elo||1e3,rank:p.rank||0,duels_wins:(null==(c=p.duelStats)?void 0:c.wins)||0,duels_losses:(null==(n=p.duelStats)?void 0:n.losses)||0,duels_tied:(null==(d=p.duelStats)?void 0:d.ties)||0,win_rate:(null==(i=p.duelStats)?void 0:i.winRate)||0}}else console.warn("Failed to fetch ELO data:",b.status),x={elo:p.elo||1e3,rank:p.rank||0,duels_wins:(null==(r=p.duelStats)?void 0:r.wins)||0,duels_losses:(null==(s=p.duelStats)?void 0:s.losses)||0,duels_tied:(null==(o=p.duelStats)?void 0:o.ties)||0,win_rate:(null==(t=p.duelStats)?void 0:t.winRate)||0};u(p),g(x),m(!1)}catch(a){console.error("Unexpected error fetching public profile:",a),"TypeError"===a.name?w("Network error. Please check your connection."):a.message&&a.message.includes("timeout")?w("Request timed out. Please try again."):w("An unexpected error occurred. Please try again later."),m(!1)}},[]);return(0,t.useEffect)(()=>{let{apiUrl:e}=(0,x.A)(),r=a.query.u;if(r||(r=new URLSearchParams(window.location.search).get("u")),!r){m(!1),w("No username provided. Use format: /user?u=username");return}i(r),v(r)},[a.query.u,v]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c,{children:[(0,s.jsx)("title",{className:"jsx-c5b0a98502da93ac",children:r?"".concat(r,"'s Profile - WorldGuessr"):"User Profile - WorldGuessr"}),(0,s.jsx)("meta",{name:"description",content:r?"View ".concat(r,"'s WorldGuessr profile stats, ELO rating, and achievements."):"View user profile on WorldGuessr",className:"jsx-c5b0a98502da93ac"})]}),(0,s.jsx)(d.A,{}),(0,s.jsxs)("div",{className:"jsx-c5b0a98502da93ac user-profile-page",children:[(0,s.jsx)("div",{className:"jsx-c5b0a98502da93ac back-button-container",children:(0,s.jsx)("button",{onClick:()=>a.push("/"),className:"jsx-c5b0a98502da93ac back-to-wg-button",children:"← Back to WorldGuessr"})}),h&&(0,s.jsx)("div",{className:"jsx-c5b0a98502da93ac loading-container",children:(0,s.jsxs)("div",{className:"jsx-c5b0a98502da93ac loading-card",children:[(0,s.jsx)("div",{className:"jsx-c5b0a98502da93ac loading-spinner"}),(0,s.jsx)("p",{className:"jsx-c5b0a98502da93ac",children:"Loading profile..."})]})}),j&&(0,s.jsx)("div",{className:"jsx-c5b0a98502da93ac error-container",children:(0,s.jsxs)("div",{className:"jsx-c5b0a98502da93ac error-card",children:[(0,s.jsxs)("h2",{className:"jsx-c5b0a98502da93ac",children:["⚠️ ",j]}),(0,s.jsx)("p",{className:"jsx-c5b0a98502da93ac",children:"The user profile could not be loaded."}),(0,s.jsxs)("div",{className:"jsx-c5b0a98502da93ac error-actions",children:[(0,s.jsx)("button",{onClick:()=>{let e=a.query.u||new URLSearchParams(window.location.search).get("u");e?v(e):w("No username provided")},className:"jsx-c5b0a98502da93ac retry-button",children:"Retry"}),(0,s.jsx)("button",{onClick:()=>a.push("/"),className:"jsx-c5b0a98502da93ac home-button",children:"Go Home"})]})]})}),!h&&!j&&l&&f&&(0,s.jsx)(p,{profileData:l,eloData:f})]}),(0,s.jsx)(o,{id:"c5b0a98502da93ac",children:'.user-profile-page.jsx-c5b0a98502da93ac{min-height:100vh;background:linear-gradient(135deg,rgba(20,65,25,.9)0%,rgba(20,65,25,.6)50%,rgba(255,255,255,0)100%);background-attachment:fixed;padding:20px;box-sizing:border-box;font-family:"Lexend",sans-serif}.back-button-container.jsx-c5b0a98502da93ac{max-width:1200px;margin:0 auto 20px auto;padding:0 20px}.back-to-wg-button.jsx-c5b0a98502da93ac{background:var(--gradLight);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:12px;padding:12px 24px;color:white;font-size:16px;font-weight:600;cursor:pointer;transition:all.3s ease;filter:drop-shadow(0px 6px 7px rgba(0,0,0,.3));font-family:"Lexend",sans-serif;text-shadow:0 2px 4px rgba(0,0,0,.3)}.back-to-wg-button.jsx-c5b0a98502da93ac:hover{background:var(--gradGreenBtn);transform:translatey(-2px);filter:drop-shadow(0px 8px 10px rgba(0,0,0,.4));border-color:rgba(255,255,255,.3)}.back-to-wg-button.jsx-c5b0a98502da93ac:active{transform:translatey(0)}.loading-container.jsx-c5b0a98502da93ac{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100vh - 120px);padding:20px}.loading-card.jsx-c5b0a98502da93ac{background:var(--gradLight);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:20px;padding:60px 40px;text-align:center;color:white;filter:drop-shadow(0px 6px 7px rgba(0,0,0,.3));max-width:400px}.loading-spinner.jsx-c5b0a98502da93ac{border:4px solid rgba(255,255,255,.2);border-radius:50%;border-top:4px solid rgba(255,255,255,.9);width:60px;height:60px;animation:spin 1s linear infinite;margin:0 auto 20px auto}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.loading-card.jsx-c5b0a98502da93ac p.jsx-c5b0a98502da93ac{font-size:18px;font-weight:500;margin:0;text-shadow:0 2px 4px rgba(0,0,0,.3);font-family:"Lexend",sans-serif}.error-container.jsx-c5b0a98502da93ac{display:flex;align-items:center;justify-content:center;min-height:calc(100vh - 120px);padding:20px}.error-card.jsx-c5b0a98502da93ac{background:var(--gradLight);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);border-radius:20px;padding:40px;max-width:500px;text-align:center;color:white;filter:drop-shadow(0px 6px 7px rgba(0,0,0,.3));width:100%}.error-card.jsx-c5b0a98502da93ac h2.jsx-c5b0a98502da93ac{margin:0 0 15px 0;font-size:clamp(24px,5vw,32px);color:#ffc107;text-shadow:0 2px 4px rgba(0,0,0,.3);font-family:"Lexend",sans-serif}.error-card.jsx-c5b0a98502da93ac p.jsx-c5b0a98502da93ac{margin:0 0 25px 0;font-size:16px;color:rgba(255,255,255,.9);text-shadow:0 1px 2px rgba(0,0,0,.3);font-family:"Lexend",sans-serif}.error-actions.jsx-c5b0a98502da93ac{display:flex;gap:15px;justify-content:center;flex-wrap:wrap}.error-card.jsx-c5b0a98502da93ac button.jsx-c5b0a98502da93ac{padding:12px 30px;border:1px solid rgba(255,255,255,.2);border-radius:12px;background:var(--gradGreenBtn);color:white;font-size:16px;font-weight:600;cursor:pointer;transition:all.3s ease;filter:drop-shadow(0px 4px 6px rgba(0,0,0,.3));font-family:"Lexend",sans-serif;text-shadow:0 2px 4px rgba(0,0,0,.3)}.error-card.jsx-c5b0a98502da93ac button.retry-button.jsx-c5b0a98502da93ac{background:var(--gradBlue);border-color:rgba(29,29,91,.8)}.error-card.jsx-c5b0a98502da93ac button.retry-button.jsx-c5b0a98502da93ac:hover{transform:translatey(-2px);filter:drop-shadow(0px 6px 10px rgba(0,0,0,.4));border-color:rgba(255,255,255,.3)}.error-card.jsx-c5b0a98502da93ac button.home-button.jsx-c5b0a98502da93ac:hover{transform:translatey(-2px);filter:drop-shadow(0px 6px 10px rgba(0,0,0,.4));border-color:rgba(255,255,255,.3)}.error-card.jsx-c5b0a98502da93ac button.jsx-c5b0a98502da93ac:active{transform:translatey(0)}@media(max-width:768px){.user-profile-page.jsx-c5b0a98502da93ac{padding:15px}.back-button-container.jsx-c5b0a98502da93ac{padding:0;margin-bottom:15px}.back-to-wg-button.jsx-c5b0a98502da93ac{width:100%;padding:10px 20px;font-size:14px}.error-card.jsx-c5b0a98502da93ac{padding:30px 20px}.error-card.jsx-c5b0a98502da93ac button.jsx-c5b0a98502da93ac{padding:10px 20px;font-size:14px}.loading-card.jsx-c5b0a98502da93ac{padding:40px 30px}}'})]})}}},a=>{a.O(0,[938,585,697,535,833,318,479,213,60,636,593,792],()=>a(a.s=2144)),_N_E=a.O()}]);