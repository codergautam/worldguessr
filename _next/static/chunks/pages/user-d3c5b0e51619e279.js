(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[921],{2144:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return r(9422)}])},9422:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>x});var i=r(7876),s=r(4250),o=r(4232),n=r(7328),l=r(9099),t=r(1213),d=r(1079),c=r(9262),b=r(1173);function p(e){let{profileData:a,eloData:r}=e,{t:n}=(0,b.B)("common"),[l,t]=(0,o.useState)("profile"),p=[{key:"profile",label:n("profile"),icon:"\uD83D\uDC64"},{key:"elo",label:n("ELO"),icon:"\uD83C\uDFC6"}];return(0,i.jsxs)("div",{className:"jsx-a1cb3ee97aef3ebb public-profile-container",children:[(0,i.jsxs)("div",{className:"jsx-a1cb3ee97aef3ebb public-profile-content",children:[(0,i.jsx)("div",{className:"jsx-a1cb3ee97aef3ebb public-profile-header",children:(0,i.jsxs)("h1",{className:"jsx-a1cb3ee97aef3ebb",children:[null==a?void 0:a.username,(null==a?void 0:a.supporter)&&(0,i.jsx)("span",{style:{marginLeft:"15px",color:"black",fontSize:"0.7rem",background:"linear-gradient(135deg, #ffd700, #ffed4e)",padding:"4px 12px",borderRadius:"15px",fontWeight:"bold",textShadow:"none"},className:"jsx-a1cb3ee97aef3ebb",children:"SUPPORTER"})]})}),(0,i.jsx)("nav",{className:"jsx-a1cb3ee97aef3ebb public-profile-nav",children:p.map(e=>(0,i.jsxs)("button",{onClick:()=>t(e.key),className:"jsx-a1cb3ee97aef3ebb "+"public-profile-nav-item ".concat(l===e.key?"active":""),children:[(0,i.jsx)("span",{className:"jsx-a1cb3ee97aef3ebb nav-icon",children:e.icon}),(0,i.jsx)("span",{className:"jsx-a1cb3ee97aef3ebb nav-label",children:e.label})]},e.key))}),(0,i.jsx)("div",{className:"jsx-a1cb3ee97aef3ebb public-profile-body",children:(()=>{switch(l){case"profile":return(0,i.jsx)("div",{className:"profile-content",children:(0,i.jsx)(d.A,{accountData:a,supporter:null==a?void 0:a.supporter,eloData:r,session:null,isPublic:!0,username:null==a?void 0:a.username})});case"elo":return(0,i.jsx)("div",{className:"elo-content",children:(0,i.jsx)(c.A,{eloData:r,session:null,isPublic:!0,username:null==a?void 0:a.username})});default:return null}})()})]}),(0,i.jsx)(s,{id:"a1cb3ee97aef3ebb",children:".public-profile-container.jsx-a1cb3ee97aef3ebb{min-height:100vh;width:100%;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);background-attachment:fixed;padding:20px;box-sizing:border-box}.public-profile-content.jsx-a1cb3ee97aef3ebb{max-width:1200px;margin:0 auto;background:rgba(255,255,255,.05);border-radius:20px;backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px rgba(0,0,0,.3);overflow:hidden}.public-profile-header.jsx-a1cb3ee97aef3ebb{background:rgba(0,0,0,.2);padding:30px;border-bottom:1px solid rgba(255,255,255,.1)}.public-profile-header.jsx-a1cb3ee97aef3ebb h1.jsx-a1cb3ee97aef3ebb{margin:0;font-size:clamp(28px,5vw,48px);font-weight:bold;color:white;text-shadow:2px 2px 4px rgba(0,0,0,.3);display:flex;align-items:center;justify-content:center}.public-profile-nav.jsx-a1cb3ee97aef3ebb{display:flex;gap:10px;padding:20px;background:rgba(0,0,0,.1);overflow-x:auto;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.3)transparent}.public-profile-nav.jsx-a1cb3ee97aef3ebb::-webkit-scrollbar{height:6px}.public-profile-nav.jsx-a1cb3ee97aef3ebb::-webkit-scrollbar-thumb{background:rgba(255,255,255,.3);border-radius:3px}.public-profile-nav-item.jsx-a1cb3ee97aef3ebb{display:flex;align-items:center;gap:8px;padding:12px 24px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);border-radius:25px;color:white;font-size:16px;font-weight:500;cursor:pointer;transition:all.3s ease;white-space:nowrap}.public-profile-nav-item.jsx-a1cb3ee97aef3ebb:hover{background:rgba(255,255,255,.1);transform:translatey(-2px)}.public-profile-nav-item.active.jsx-a1cb3ee97aef3ebb{background:linear-gradient(135deg,#28a745,#20c997);border-color:transparent;box-shadow:0 4px 15px rgba(40,167,69,.3)}.nav-icon.jsx-a1cb3ee97aef3ebb{font-size:20px}.nav-label.jsx-a1cb3ee97aef3ebb{font-size:14px}.public-profile-body.jsx-a1cb3ee97aef3ebb{padding:30px;max-height:calc(100vh - 300px);overflow-y:auto;scrollbar-width:thin;scrollbar-color:rgba(255,255,255,.3)transparent}.public-profile-body.jsx-a1cb3ee97aef3ebb::-webkit-scrollbar{width:8px}.public-profile-body.jsx-a1cb3ee97aef3ebb::-webkit-scrollbar-thumb{background:rgba(255,255,255,.3);border-radius:4px}.profile-content.jsx-a1cb3ee97aef3ebb,.elo-content.jsx-a1cb3ee97aef3ebb{animation:fadeIn.3s ease}@keyframes fadeIn{from{opacity:0;transform:translatey(10px)}to{opacity:1;transform:translatey(0)}}@media(max-width:768px){.public-profile-container.jsx-a1cb3ee97aef3ebb{padding:10px}.public-profile-header.jsx-a1cb3ee97aef3ebb{padding:20px}.public-profile-nav.jsx-a1cb3ee97aef3ebb{padding:15px}.public-profile-body.jsx-a1cb3ee97aef3ebb{padding:20px;max-height:calc(100vh - 250px)}.nav-label.jsx-a1cb3ee97aef3ebb{display:none}.public-profile-nav-item.jsx-a1cb3ee97aef3ebb{padding:12px}.nav-icon.jsx-a1cb3ee97aef3ebb{font-size:24px}}@media(max-width:480px){.public-profile-body.jsx-a1cb3ee97aef3ebb{padding:15px}}"})]})}var f=r(3603);function x(){let e=(0,l.useRouter)(),{t:a}=(0,b.B)("common"),[r,d]=(0,o.useState)(null),[c,x]=(0,o.useState)(null),[u,h]=(0,o.useState)(null),[g,m]=(0,o.useState)(!0),[j,w]=(0,o.useState)(null);return(0,o.useEffect)(()=>{let{apiUrl:a}=(0,f.A)(),r=e.query.u;if(r||(r=new URLSearchParams(window.location.search).get("u")),!r){m(!1),w("No username provided. Use format: /user?u=username");return}d(r),(async()=>{m(!0),w(null);try{let[n,l]=await Promise.all([fetch("".concat(a,"/api/publicProfile?username=").concat(encodeURIComponent(r))),fetch("".concat(a,"/api/eloRank?username=").concat(encodeURIComponent(r)))]);if(!n.ok){if(404===n.status)w("User not found");else if(429===n.status)w("Too many requests. Please try again later.");else if(400===n.status){let e=await n.json();w(e.message||"Invalid username format")}else w("Failed to load profile");m(!1);return}let t=await n.json();if(l.ok){let e=await l.json();x(t),h(e)}else{var e,i,s,o;console.warn("Failed to fetch ELO data:",l.status),x(t),h({elo:t.elo||1e3,rank:t.rank||0,duels_wins:(null==(e=t.duelStats)?void 0:e.wins)||0,duels_losses:(null==(i=t.duelStats)?void 0:i.losses)||0,duels_tied:(null==(s=t.duelStats)?void 0:s.ties)||0,win_rate:(null==(o=t.duelStats)?void 0:o.winRate)||0})}m(!1)}catch(e){console.error("Error fetching public profile:",e),w("An error occurred while loading the profile"),m(!1)}})()},[e.query.u]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n,{children:[(0,i.jsx)("title",{className:"jsx-f89e855042fed121",children:r?"".concat(r,"'s Profile - WorldGuessr"):"User Profile - WorldGuessr"}),(0,i.jsx)("meta",{name:"description",content:r?"View ".concat(r,"'s WorldGuessr profile stats, ELO rating, and achievements."):"View user profile on WorldGuessr",className:"jsx-f89e855042fed121"})]}),(0,i.jsx)(t.A,{}),(0,i.jsxs)("div",{className:"jsx-f89e855042fed121 user-profile-page",children:[g&&(0,i.jsxs)("div",{className:"jsx-f89e855042fed121 loading-container",children:[(0,i.jsx)("div",{className:"jsx-f89e855042fed121 loading-spinner"}),(0,i.jsx)("p",{className:"jsx-f89e855042fed121",children:"Loading profile..."})]}),j&&(0,i.jsx)("div",{className:"jsx-f89e855042fed121 error-container",children:(0,i.jsxs)("div",{className:"jsx-f89e855042fed121 error-card",children:[(0,i.jsxs)("h2",{className:"jsx-f89e855042fed121",children:["⚠️ ",j]}),(0,i.jsx)("p",{className:"jsx-f89e855042fed121",children:"The user profile could not be loaded."}),(0,i.jsx)("button",{onClick:()=>e.push("/"),className:"jsx-f89e855042fed121",children:"Go Home"})]})}),!g&&!j&&c&&u&&(0,i.jsx)(p,{profileData:c,eloData:u})]}),(0,i.jsx)(s,{id:"f89e855042fed121",children:".user-profile-page.jsx-f89e855042fed121{min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);background-attachment:fixed}.loading-container.jsx-f89e855042fed121{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100vh - 80px);color:white;padding:20px}.loading-spinner.jsx-f89e855042fed121{border:4px solid rgba(255,255,255,.1);border-radius:50%;border-top:4px solid white;width:60px;height:60px;animation:spin 1s linear infinite;margin-bottom:20px}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.loading-container.jsx-f89e855042fed121 p.jsx-f89e855042fed121{font-size:18px;font-weight:500}.error-container.jsx-f89e855042fed121{display:flex;align-items:center;justify-content:center;min-height:calc(100vh - 80px);padding:20px}.error-card.jsx-f89e855042fed121{background:rgba(255,255,255,.1);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,.2);border-radius:20px;padding:40px;max-width:500px;text-align:center;color:white;box-shadow:0 8px 32px rgba(0,0,0,.3)}.error-card.jsx-f89e855042fed121 h2.jsx-f89e855042fed121{margin:0 0 15px 0;font-size:clamp(24px,5vw,32px);color:#ffc107}.error-card.jsx-f89e855042fed121 p.jsx-f89e855042fed121{margin:0 0 25px 0;font-size:16px;color:rgba(255,255,255,.9)}.error-card.jsx-f89e855042fed121 button.jsx-f89e855042fed121{padding:12px 30px;border:none;border-radius:25px;background:linear-gradient(135deg,#28a745,#20c997);color:white;font-size:16px;font-weight:600;cursor:pointer;transition:all.3s ease;box-shadow:0 4px 15px rgba(40,167,69,.3)}.error-card.jsx-f89e855042fed121 button.jsx-f89e855042fed121:hover{transform:translatey(-2px);box-shadow:0 6px 20px rgba(40,167,69,.4)}@media(max-width:768px){.error-card.jsx-f89e855042fed121{padding:30px 20px}}"})]})}}},e=>{e.O(0,[938,585,697,535,833,318,479,213,60,636,593,792],()=>e(e.s=2144)),_N_E=e.O()}]);